import{j as t,r as p,c as ae}from"./react-DLwQdj7q.js";import{a as fe}from"./react-dom-Bpij0FWw.js";import{B as Re}from"./react-router-dom-Bjp-w-kY.js";import{u as h,a as I,P as De}from"./react-redux-BsdHwLJa.js";import{c as Y,a as pe,b as Ae}from"./@reduxjs-NaPybp_z.js";import{c as we,u as de,a as Se,T as j,B as N,b as je,F as Ne,N as ke,d as z,S as H,H as Ie,D as Te,A as Pe,e as Me,C as $e,R as ze,E as Le,s as le,f as be,g as We,h as He,i as Ge,j as Ze,k as Ke}from"./@mui-gEQS-3Z-.js";import{d as ye}from"./lodash-D9Xc9Uuo.js";import{c as ee,A as Ue}from"./react-select-Cfw0BZ38.js";import{P as B}from"./prop-types-D7IYfoA1.js";import{C as Ve}from"./react-spinners-CLfjgBhW.js";import{s as J}from"./string-width-BwHzav8R.js";import"./@babel-3BxVu_ax.js";import"./scheduler-SPyfQU6S.js";import"./react-router-CV6FO8-_.js";import"./@remix-run-BBWqMfS0.js";import"./use-sync-external-store-BCKmAaC2.js";import"./redux-BXkGT1VS.js";import"./immer-DqxjFn0G.js";import"./redux-thunk-ClJT1hhx.js";import"./@emotion-_JA2SG62.js";import"./hoist-non-react-statics-C-Qo8PK8.js";import"./stylis-DDa9OTMq.js";import"./clsx-B-dksMZM.js";import"./react-transition-group-CndzbEAZ.js";import"./@popperjs-CMBiYTiD.js";import"./react-is-BPJnJB5S.js";import"./@floating-ui-Dqirgmo9.js";import"./use-isomorphic-layout-effect-8A7Cpl8G.js";import"./memoize-one-BdPwpGay.js";import"./get-east-asian-width-R4ibU9pT.js";import"./emoji-regex-D90yNSKR.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const n of i)if(n.type==="childList")for(const u of n.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function o(i){const n={};return i.integrity&&(n.integrity=i.integrity),i.referrerPolicy&&(n.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?n.credentials="include":i.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(i){if(i.ep)return;i.ep=!0;const n=o(i);fetch(i.href,n)}})();const Ye=/\([A-Z]{2}\d{3}\)$/,te=e=>e.replace(Ye,"").trim(),Je=e=>{const s=e.data.name_en,o=e.data.name_tc;return{en:te(s),zh:te(o)}},Xe=(e,s="number")=>{var r;return e&&(((r={number:{O:"1",I:"2"},letter:{1:"O",2:"I"}}[s])==null?void 0:r[e])||e)},Qe=e=>e&&String(parseInt(e,10)),k="｜",X="往",ve="特別班",et=(e,s)=>{const o=n=>{const u=n.match(/^([A-Z]*)(\d+)([A-Z0-9]*)$/);return u?{prefix:u[1]||"",base:parseInt(u[2],10),suffix:u[3]||""}:{prefix:"",base:1/0,suffix:n}},r=o(e.route),i=o(s.route);return r.prefix!==i.prefix?r.prefix?i.prefix?r.prefix.localeCompare(i.prefix):1:-1:r.base!==i.base?r.base-i.base:!r.suffix&&i.suffix?-1:!i.suffix&&r.suffix?1:r.suffix.localeCompare(i.suffix)},tt=[{route:"52S",bound:"I",service_type:"1",dest_en:"Tuen Mun Road BBI",dest_tc:"屯門公路轉車站",orig_en:"Tsang Tsui",orig_tc:"曾咀"},{route:"52S",bound:"O",service_type:"1",orig_en:"Tuen Mun Road BBI",orig_tc:"屯門公路轉車站",dest_en:"Tsang Tsui",dest_tc:"曾咀"},{route:"56S",bound:"O",service_type:"1",dest_en:"Tuen Mun Station",dest_tc:"屯門站",orig_en:"Tsang Tsui",orig_tc:"曾咀"},{route:"56S",bound:"O",service_type:"1",orig_en:"Tuen Mun Station",orig_tc:"屯門站",dest_en:"Tsang Tsui",dest_tc:"曾咀"},{route:"61S",bound:"I",service_type:"1",dest_en:"Wo Hop Shek",dest_tc:"和合石",orig_en:"Tuen Mun Central",orig_tc:"屯門市中心"},{route:"61S",bound:"O",service_type:"1",orig_en:"Wo Hop Shek",orig_tc:"和合石",dest_en:"Tuen Mun Central",dest_tc:"屯門市中心"},{route:"73S",bound:"I",service_type:"1",dest_en:"Fanling Station",dest_tc:"粉嶺站",orig_en:"Wo Hop Shek (Kiu Tau Road)",orig_tc:"和合石 (橋頭路)"},{route:"73S",bound:"O",service_type:"1",orig_en:"Fanling Station",orig_tc:"粉嶺站",dest_en:"Wo Hop Shek (Kiu Tau Road)",dest_tc:"和合石 (橋頭路)"},{route:"76S",bound:"I",service_type:"1",dest_en:"Fanling Station",dest_tc:"粉嶺站",orig_en:"Wo Hop Shek",orig_tc:"和合石"},{route:"76S",bound:"O",service_type:"1",orig_en:"Fanling Station",orig_tc:"粉嶺站",dest_en:"Wo Hop Shek",dest_tc:"和合石"},{route:"N64P",bound:"O",service_type:"1",orig_en:"Tai Po Market Station",orig_tc:"大埔墟站",dest_en:"Ng Tung Chai (Pak Ngau Shek)",dest_tc:"梧桐寨(白牛石)"},{route:"N72E",bound:"O",service_type:"1",orig_en:"Tai Mei Tuk",orig_tc:"大尾督",dest_en:"Tsim Sha Tsui East (Mody Road)",dest_tc:"尖沙咀東(麼地道)",specialRemark:"只於2018/11/11奧比斯盲俠行活動提供服務"},{route:"N73E",bound:"O",service_type:"1",orig_en:"Tai Mei Tuk",orig_tc:"大尾督",dest_en:"Tsuen Wan (Nina Tower)",dest_tc:"荃灣(如心廣場)",specialRemark:"只於2018/11/11奧比斯盲俠行活動提供服務"},{route:"N74E",bound:"O",service_type:"1",orig_en:"Tai Mei Tuk",orig_tc:"大尾督",dest_en:"Kwun Tong Station",dest_tc:"觀塘站",specialRemark:"只於2018/11/11奧比斯盲俠行活動提供服務"},{route:"N272",bound:"O",service_type:"1",orig_en:"University Station",orig_tc:"大學站",dest_en:"Pak Shek Kok (Circular)",dest_tc:"白石角(循環線)"},{route:"R94",bound:"I",service_type:"1",dest_en:"Tai Wo",dest_tc:"太和",orig_en:"Wong Shek Pier",orig_tc:"黃石碼頭",specialRemark:"只於2019年4月23日至28日塔門聯鄉太平清醮提供服務"},{route:"R94",bound:"O",service_type:"1",orig_en:"Tai Wo",orig_tc:"太和",dest_en:"Wong Shek Pier",dest_tc:"黃石碼頭",specialRemark:"只於2019年4月23日至28日塔門聯鄉太平清醮提供服務"},{route:"R108",bound:"O",service_type:"1",orig_en:"Kai Yip",orig_tc:"啟業",dest_en:"Causeway Bay (Victoria Park)",dest_tc:"銅鑼灣(維多利亞公園)"},{route:"R215",bound:"O",service_type:"1",orig_en:"Lam Tin (Kwong Tin Estate)",orig_tc:"藍田(廣田邨)",dest_en:"Tsim Sha Tsui East (Mody Road)",dest_tc:"尖沙咀東(麼地道)"},{route:"R260",bound:"O",service_type:"1",orig_en:"Tuen Mun Ferry Pier",orig_tc:"屯門碼頭",dest_en:"Tsim Sha Tsui East (Mody Road)",dest_tc:"尖沙咀東(麼地道)"},{route:"R269",bound:"O",service_type:"1",orig_en:"Tin Tsz",orig_tc:"天慈",dest_en:"Tsim Sha Tsui East (Mody Road)",dest_tc:"尖沙咀東(麼地道)"},{route:"R270",bound:"O",service_type:"1",orig_en:"Sheung Shui",orig_tc:"上水",dest_en:"Tsim Sha Tsui East (Mody Road)",dest_tc:"尖沙咀東(麼地道)"},{route:"R271",bound:"O",service_type:"1",orig_en:"Tai Po (Fu Heng)",orig_tc:"大埔(富亨)",dest_en:"Tsim Sha Tsui East (Mody Road)",dest_tc:"尖沙咀東(麼地道)"},{route:"R283",bound:"O",service_type:"1",orig_en:"Shek Mun Estate",orig_tc:"碩門邨",dest_en:"Tsim Sha Tsui East (Mody Road)",dest_tc:"尖沙咀東(麼地道)"},{route:"R287",bound:"O",service_type:"1",orig_en:"Wu Kai Sha Station",orig_tc:"烏溪沙站",dest_en:"Tsim Sha Tsui East (Mody Road)",dest_tc:"尖沙咀東(麼地道)"},{route:"R298",bound:"O",service_type:"1",orig_en:"Hong Sing Garden",orig_tc:"康盛花園",dest_en:"Tsim Sha Tsui East (Mody Road)",dest_tc:"尖沙咀東(麼地道)"},{route:"R307",bound:"O",service_type:"1",orig_en:"Tai Po (Ting Tai Road)",orig_tc:"大埔(汀太路)",dest_en:"Causeway Bay (Victoria Park)",dest_tc:"銅鑼灣(維多利亞公園)"},{route:"R603",bound:"O",service_type:"1",orig_en:"On Tai (West) (Wo Tai House)",orig_tc:"安泰(西)(和泰樓)",dest_en:"Causeway Bay (Victoria Park)",dest_tc:"銅鑼灣(維多利亞公園)"},{route:"R673",bound:"O",service_type:"1",orig_en:"Sheung Shui (Ching Ho Estate)",orig_tc:"上水(清河邨)",dest_en:"Causeway Bay (Victoria Park)",dest_tc:"銅鑼灣(維多利亞公園)"},{route:"R678",bound:"O",service_type:"1",orig_en:"Sheung Shui",orig_tc:"上水",dest_en:"Causeway Bay (Victoria Park)",dest_tc:"銅鑼灣(維多利亞公園)"},{route:"R680",bound:"O",service_type:"1",orig_en:"Kam Ying Court",orig_tc:"錦英苑",dest_en:"Causeway Bay (Victoria Park)",dest_tc:"銅鑼灣(維多利亞公園)"},{route:"R960",bound:"O",service_type:"1",orig_en:"Hung Shui Kiu (Hung Fuk Estate)",orig_tc:"洪水橋(洪福邨)",dest_en:"Causeway Bay (Victoria Park)",dest_tc:"銅鑼灣(維多利亞公園)"},{route:"R961",bound:"O",service_type:"1",orig_en:"Tuen Mun (Shan King Estate)",orig_tc:"屯門(山景邨)",dest_en:"Causeway Bay (Victoria Park)",dest_tc:"銅鑼灣(維多利亞公園)"},{route:"R968",bound:"O",service_type:"1",orig_en:"Yuen Long (Fung Cheung Road)",orig_tc:"元朗(鳳翔路)",dest_en:"Causeway Bay (Victoria Park)",dest_tc:"銅鑼灣(維多利亞公園)"}],ot=[{route:"61S",bound:"O",service_type:"1",seq:"1",stop:"E7A87FB9C7108D6B"},{route:"61S",bound:"O",service_type:"1",seq:"2",stop:"6FB7BC1E5BC1E4EE"},{route:"61S",bound:"O",service_type:"1",seq:"3",stop:"5238463F47B490D6"},{route:"61S",bound:"O",service_type:"1",seq:"4",stop:"C1BF4509359B0895"},{route:"61S",bound:"I",service_type:"1",seq:"1",stop:"C1BF4509359B0895"},{route:"61S",bound:"I",service_type:"1",seq:"2",stop:"EC49B6F5634BC0C2"},{route:"61S",bound:"I",service_type:"1",seq:"3",stop:"5238463F47B490D6"},{route:"61S",bound:"I",service_type:"1",seq:"4",stop:"D9B82EE66AFF2975"},{route:"61S",bound:"I",service_type:"1",seq:"5",stop:"E7A87FB9C7108D6B"},{route:"76S",bound:"O",service_type:"1",seq:"1",stop:"60952B4A38F3D82E"},{route:"76S",bound:"O",service_type:"1",seq:"2",stop:"E7A87FB9C7108D6B"},{route:"76S",bound:"I",service_type:"1",seq:"1",stop:"E7A87FB9C7108D6B"},{route:"76S",bound:"I",service_type:"1",seq:"2",stop:"60952B4A38F3D82E"},{route:"N64P",bound:"O",service_type:"1",seq:"1",stop:"7910B0EBDD33B71B"},{route:"N64P",bound:"O",service_type:"1",seq:"2",stop:"56C003E99C21984A"},{route:"N64P",bound:"O",service_type:"1",seq:"3",stop:"6219234626AC9DD5"},{route:"N64P",bound:"O",service_type:"1",seq:"4",stop:"DA30F5393480B81D"},{route:"N64P",bound:"O",service_type:"1",seq:"5",stop:"6716018C3EE42733"},{route:"N64P",bound:"O",service_type:"1",seq:"6",stop:"1A0BF02F827F6A20"},{route:"N64P",bound:"O",service_type:"1",seq:"7",stop:"CCC4773031BC0FD8"},{route:"N64P",bound:"O",service_type:"1",seq:"8",stop:"2A86FE3FCDB9760B"},{route:"N64P",bound:"O",service_type:"1",seq:"9",stop:"5FCD0D727920EC65"},{route:"N64P",bound:"O",service_type:"1",seq:"10",stop:"0B786699889F0AEB"},{route:"N64P",bound:"O",service_type:"1",seq:"11",stop:"A53F6592C4173B4E"},{route:"N64P",bound:"O",service_type:"1",seq:"12",stop:"A61CDC435D1C6C37"},{route:"N64P",bound:"O",service_type:"1",seq:"13",stop:"B473A39CEDD5069D"},{route:"N64P",bound:"O",service_type:"1",seq:"14",stop:"2A092A3FB143443A"},{route:"N64P",bound:"O",service_type:"1",seq:"15",stop:"BEEF3ECF24FF4F1A"},{route:"N64P",bound:"O",service_type:"1",seq:"16",stop:"A26AAC44AD49B9DB"},{route:"N64P",bound:"O",service_type:"1",seq:"17",stop:"51AFF58670A6BE9B"},{route:"N64P",bound:"O",service_type:"1",seq:"18",stop:"C97D9654FC4427C9"},{route:"N64P",bound:"O",service_type:"1",seq:"19",stop:"42B5697C975C3953"},{route:"N64P",bound:"O",service_type:"1",seq:"20",stop:"B4C010DBFBD55834"},{route:"N72E",bound:"O",service_type:"1",seq:"1",stop:"DCAB4C1F147AFB1C"},{route:"N72E",bound:"O",service_type:"1",seq:"2",stop:"DF9E89A391CAC245"},{route:"N72E",bound:"O",service_type:"1",seq:"3",stop:"657E5836BC932790"},{route:"N72E",bound:"O",service_type:"1",seq:"4",stop:"850F72123F644500"},{route:"N72E",bound:"O",service_type:"1",seq:"5",stop:"98FCC750B322B706"},{route:"N72E",bound:"O",service_type:"1",seq:"6",stop:"8C44D48B9BAAB774"},{route:"N72E",bound:"O",service_type:"1",seq:"7",stop:"300D1812E3A085C3"},{route:"N72E",bound:"O",service_type:"1",seq:"8",stop:"9B1BE296C2AC5F97"},{route:"N72E",bound:"O",service_type:"1",seq:"9",stop:"456320D47FFB5B1A"},{route:"N72E",bound:"O",service_type:"1",seq:"10",stop:"36AABE317D2F7A0B"},{route:"N72E",bound:"O",service_type:"1",seq:"11",stop:"5EEA801CA265E5C1"},{route:"N72E",bound:"O",service_type:"1",seq:"12",stop:"77BFE3A169866C7D"},{route:"N72E",bound:"O",service_type:"1",seq:"13",stop:"CD7C28BDF71C00D7"},{route:"N72E",bound:"O",service_type:"1",seq:"14",stop:"1DEB855D55528B03"},{route:"N72E",bound:"O",service_type:"1",seq:"15",stop:"11A1269F9B78F269"},{route:"N72E",bound:"O",service_type:"1",seq:"16",stop:"5D75A800F823B45D"},{route:"N72E",bound:"O",service_type:"1",seq:"17",stop:"9E376227A51AB6BE"},{route:"N73E",bound:"O",service_type:"1",seq:"1",stop:"DCAB4C1F147AFB1C"},{route:"N73E",bound:"O",service_type:"1",seq:"2",stop:"97BB9CE7A058E809"},{route:"N73E",bound:"O",service_type:"1",seq:"3",stop:"9FD6AAFA1318E3D9"},{route:"N73E",bound:"O",service_type:"1",seq:"4",stop:"03A5552B84E8214B"},{route:"N73E",bound:"O",service_type:"1",seq:"5",stop:"0B4807A5C0DAF24A"},{route:"N73E",bound:"O",service_type:"1",seq:"6",stop:"40A8EA2850B0979B"},{route:"N73E",bound:"O",service_type:"1",seq:"7",stop:"B943DBEE65B0B18F"},{route:"N73E",bound:"O",service_type:"1",seq:"8",stop:"7019D5AE9C63EE72"},{route:"N73E",bound:"O",service_type:"1",seq:"9",stop:"01642BC44DCFDB3C"},{route:"N73E",bound:"O",service_type:"1",seq:"10",stop:"E0908A8C2459FA0F"},{route:"N74E",bound:"O",service_type:"1",seq:"1",stop:"DCAB4C1F147AFB1C"},{route:"N74E",bound:"O",service_type:"1",seq:"2",stop:"326199D24220A42B"},{route:"N74E",bound:"O",service_type:"1",seq:"3",stop:"C847B9021C407731"},{route:"N74E",bound:"O",service_type:"1",seq:"4",stop:"38330C642568FE3F"},{route:"N74E",bound:"O",service_type:"1",seq:"5",stop:"A15FFC3149FB92A0"},{route:"N74E",bound:"O",service_type:"1",seq:"6",stop:"9DE875FD17C67097"},{route:"N74E",bound:"O",service_type:"1",seq:"7",stop:"68B207DDC9A182AB"},{route:"N74E",bound:"O",service_type:"1",seq:"8",stop:"830588EB9A8D26EC"},{route:"N74E",bound:"O",service_type:"1",seq:"9",stop:"5358062C769CEC05"},{route:"N74E",bound:"O",service_type:"1",seq:"10",stop:"3CE7B5D1EBF9C5F7"},{route:"N74E",bound:"O",service_type:"1",seq:"11",stop:"750ADEB14D018CF7"},{route:"N74E",bound:"O",service_type:"1",seq:"12",stop:"49229D04FCA51B61"},{route:"N74E",bound:"O",service_type:"1",seq:"13",stop:"114381B039350CBB"},{route:"N272",bound:"O",service_type:"1",seq:"1",stop:"9F542D4B6CF41651"},{route:"N272",bound:"O",service_type:"1",seq:"2",stop:"739A5DDE0CF1970C"},{route:"N272",bound:"O",service_type:"1",seq:"3",stop:"9E95343C77BB85E2"},{route:"N272",bound:"O",service_type:"1",seq:"4",stop:"F808AF482CCA028E"},{route:"N272",bound:"O",service_type:"1",seq:"5",stop:"BE940A2F1B154D6E"},{route:"N272",bound:"O",service_type:"1",seq:"6",stop:"E8F5E085BAEFE100"},{route:"N272",bound:"O",service_type:"1",seq:"7",stop:"3313B37BF82AFF18"},{route:"N272",bound:"O",service_type:"1",seq:"8",stop:"F8F0E91589F099CD"},{route:"N272",bound:"O",service_type:"1",seq:"9",stop:"5747450359C7907C"},{route:"N272",bound:"O",service_type:"1",seq:"10",stop:"D31420E8C08168FC"},{route:"N272",bound:"O",service_type:"1",seq:"11",stop:"3F24CFF9046300D9"},{route:"N272",bound:"O",service_type:"1",seq:"12",stop:"B34F59A0270AEDA4"},{route:"N272",bound:"O",service_type:"1",seq:"13",stop:"39E7051B17D302DA"},{route:"N272",bound:"O",service_type:"1",seq:"14",stop:"1C6EAAF5F48167F9"},{route:"N272",bound:"O",service_type:"1",seq:"15",stop:"DA9490C24D6E6026"},{route:"N272",bound:"O",service_type:"1",seq:"16",stop:"64101F297D3C1C55"},{route:"N272",bound:"O",service_type:"1",seq:"17",stop:"5B39CC28607910E4"},{route:"N272",bound:"O",service_type:"1",seq:"18",stop:"EC5018363D5C45EB"},{route:"R94",bound:"I",service_type:"1",seq:"1",stop:"399EF919E10C7F33"},{route:"R94",bound:"I",service_type:"1",seq:"2",stop:"2CBA3E00C7A4477A"},{route:"R94",bound:"I",service_type:"1",seq:"3",stop:"CB7FA5CF40D4413A"},{route:"R94",bound:"I",service_type:"1",seq:"4",stop:"3A450B5AD5AF1605"},{route:"R94",bound:"I",service_type:"1",seq:"5",stop:"6B775855F6FB16D9"},{route:"R94",bound:"I",service_type:"1",seq:"6",stop:"91A28A7727443F66"},{route:"R94",bound:"I",service_type:"1",seq:"7",stop:"3205DE941791278B"},{route:"R94",bound:"O",service_type:"1",seq:"1",stop:"3205DE941791278B"},{route:"R94",bound:"O",service_type:"1",seq:"2",stop:"91A28A7727443F66"},{route:"R94",bound:"O",service_type:"1",seq:"3",stop:"5D86C919F15C0611"},{route:"R94",bound:"O",service_type:"1",seq:"4",stop:"7E2611CD03F9450A"},{route:"R94",bound:"O",service_type:"1",seq:"5",stop:"CDB292D507E4302D"},{route:"R94",bound:"O",service_type:"1",seq:"6",stop:"530F970BB56D778D"},{route:"R94",bound:"O",service_type:"1",seq:"7",stop:"399EF919E10C7F33"},{route:"R108",bound:"O",service_type:"1",seq:"1",stop:"0718DE53C1C84496"},{route:"R108",bound:"O",service_type:"1",seq:"2",stop:"AC4EEE801BB9133C"},{route:"R108",bound:"O",service_type:"1",seq:"3",stop:"5CD6A0A0CE6B53B6"},{route:"R108",bound:"O",service_type:"1",seq:"4",stop:"32A2D05A195364DC"},{route:"R108",bound:"O",service_type:"1",seq:"5",stop:"C1C31D615DAA97F4"},{route:"R108",bound:"O",service_type:"1",seq:"6",stop:"A4601C77EB896E30"},{route:"R108",bound:"O",service_type:"1",seq:"7",stop:"E207DBF95EA7DE26"},{route:"R108",bound:"O",service_type:"1",seq:"8",stop:"C71093B5185DF735"},{route:"R108",bound:"O",service_type:"1",seq:"9",stop:"C80FB453C9F53569"},{route:"R108",bound:"O",service_type:"1",seq:"10",stop:"8BB1DE68DB8316D3"},{route:"R108",bound:"O",service_type:"1",seq:"11",stop:"AE4D7869B643DAA2"},{route:"R108",bound:"O",service_type:"1",seq:"12",stop:"AE2A53D953B640BE"},{route:"R108",bound:"O",service_type:"1",seq:"13",stop:"E798CB4E2C777782"},{route:"R108",bound:"O",service_type:"1",seq:"14",stop:"6E8CB58283AF3CB1"},{route:"R108",bound:"O",service_type:"1",seq:"15",stop:"9CFB5F7232818FFA"},{route:"R108",bound:"O",service_type:"1",seq:"16",stop:"A06590AD808DC9A9"},{route:"R108",bound:"O",service_type:"1",seq:"17",stop:"06C9926B2E2B304F"},{route:"R108",bound:"O",service_type:"1",seq:"18",stop:"76B4054F2E1F00B0"},{route:"R108",bound:"O",service_type:"1",seq:"19",stop:"17B98BD1165A7B92"},{route:"R215",bound:"O",service_type:"1",seq:"1",stop:"215D99B3E2A5F8DD"},{route:"R215",bound:"O",service_type:"1",seq:"2",stop:"736E84A8060D2AB9"},{route:"R215",bound:"O",service_type:"1",seq:"3",stop:"CB4B52222877C32F"},{route:"R215",bound:"O",service_type:"1",seq:"4",stop:"6B9496267BEFF02A"},{route:"R215",bound:"O",service_type:"1",seq:"5",stop:"5ACB622335DF5AE7"},{route:"R215",bound:"O",service_type:"1",seq:"6",stop:"B7082198F517B1E8"},{route:"R215",bound:"O",service_type:"1",seq:"7",stop:"1FBAAE29AF1CA50E"},{route:"R215",bound:"O",service_type:"1",seq:"8",stop:"AA52228890817D12"},{route:"R215",bound:"O",service_type:"1",seq:"9",stop:"FF68304E8C1FF0B1"},{route:"R215",bound:"O",service_type:"1",seq:"10",stop:"73BBDBB9F39C2E81"},{route:"R215",bound:"O",service_type:"1",seq:"11",stop:"AC5FA3C58493A4ED"},{route:"R215",bound:"O",service_type:"1",seq:"12",stop:"057B2DCE8BE58FFA"},{route:"R215",bound:"O",service_type:"1",seq:"13",stop:"F62E0C6D12FBEA93"},{route:"R215",bound:"O",service_type:"1",seq:"14",stop:"EA2CFF27310EAEC3"},{route:"R215",bound:"O",service_type:"1",seq:"15",stop:"93084A14AE624C6F"},{route:"R215",bound:"O",service_type:"1",seq:"16",stop:"D17050E8964504BB"},{route:"R215",bound:"O",service_type:"1",seq:"17",stop:"04DDF4F7F1C74876"},{route:"R215",bound:"O",service_type:"1",seq:"18",stop:"BF08F9C08BB54A2B"},{route:"R215",bound:"O",service_type:"1",seq:"19",stop:"3ABDE54448D1E059"},{route:"R215",bound:"O",service_type:"1",seq:"20",stop:"6765DD696FA8BF8D"},{route:"R215",bound:"O",service_type:"1",seq:"21",stop:"0CA3C6C38D2F3F75"},{route:"R215",bound:"O",service_type:"1",seq:"22",stop:"FAF9EF8853A3B65E"},{route:"R215",bound:"O",service_type:"1",seq:"23",stop:"EDFC39232C98E301"},{route:"R215",bound:"O",service_type:"1",seq:"24",stop:"9D431DF484149B75"},{route:"R215",bound:"O",service_type:"1",seq:"25",stop:"3E54E8AF4083B065"},{route:"R215",bound:"O",service_type:"1",seq:"26",stop:"3F4B54625D1F9E48"},{route:"R215",bound:"O",service_type:"1",seq:"27",stop:"F663E12DC37F3C5A"},{route:"R215",bound:"O",service_type:"1",seq:"28",stop:"D2B43459063F53DB"},{route:"R215",bound:"O",service_type:"1",seq:"29",stop:"7995F69FE44D0DB3"},{route:"R215",bound:"O",service_type:"1",seq:"30",stop:"F90ED764C7A95649"},{route:"R215",bound:"O",service_type:"1",seq:"31",stop:"041DFA7A1729D20C"},{route:"R215",bound:"O",service_type:"1",seq:"32",stop:"558599642E78BB9B"},{route:"R215",bound:"O",service_type:"1",seq:"33",stop:"BEEBDDB542A7E709"},{route:"R215",bound:"O",service_type:"1",seq:"34",stop:"68DF2B78CD2B9C76"},{route:"R260",bound:"O",service_type:"1",seq:"1",stop:"4DA3813D3CE3A5DF"},{route:"R260",bound:"O",service_type:"1",seq:"2",stop:"015AD88813C61900"},{route:"R260",bound:"O",service_type:"1",seq:"3",stop:"B88E6F52E2BC2E34"},{route:"R260",bound:"O",service_type:"1",seq:"4",stop:"3FAE59A79C8BCC93"},{route:"R260",bound:"O",service_type:"1",seq:"5",stop:"A1D3216AF158C117"},{route:"R260",bound:"O",service_type:"1",seq:"6",stop:"D010FF7CF77383B7"},{route:"R260",bound:"O",service_type:"1",seq:"7",stop:"F4D9335688592803"},{route:"R260",bound:"O",service_type:"1",seq:"8",stop:"C192BEF2264E0CC6"},{route:"R260",bound:"O",service_type:"1",seq:"9",stop:"542CC0EC83BAEA01"},{route:"R260",bound:"O",service_type:"1",seq:"10",stop:"840532B7C95DF870"},{route:"R260",bound:"O",service_type:"1",seq:"11",stop:"2F5F973821A594A9"},{route:"R260",bound:"O",service_type:"1",seq:"12",stop:"EDF4C2EAFDBD4693"},{route:"R260",bound:"O",service_type:"1",seq:"13",stop:"12CF2025741EF844"},{route:"R260",bound:"O",service_type:"1",seq:"14",stop:"580D52F4D93CAD9B"},{route:"R260",bound:"O",service_type:"1",seq:"15",stop:"3199543D3AE70527"},{route:"R260",bound:"O",service_type:"1",seq:"16",stop:"BDD49A91FF705B42"},{route:"R260",bound:"O",service_type:"1",seq:"17",stop:"8C32D9DDB85891A6"},{route:"R260",bound:"O",service_type:"1",seq:"18",stop:"5238463F47B490D6"},{route:"R260",bound:"O",service_type:"1",seq:"19",stop:"C1BF4509359B0895"},{route:"R260",bound:"O",service_type:"1",seq:"20",stop:"2D3D025684145373"},{route:"R260",bound:"O",service_type:"1",seq:"21",stop:"07B714029E91FD81"},{route:"R260",bound:"O",service_type:"1",seq:"22",stop:"913F2DF20E573CEA"},{route:"R260",bound:"O",service_type:"1",seq:"23",stop:"CA6AB8446B694566"},{route:"R260",bound:"O",service_type:"1",seq:"24",stop:"BEEBDDB542A7E709"},{route:"R260",bound:"O",service_type:"1",seq:"25",stop:"68DF2B78CD2B9C76"},{route:"R269",bound:"O",service_type:"1",seq:"1",stop:"868AEC6A9B5704FB"},{route:"R269",bound:"O",service_type:"1",seq:"2",stop:"D813C93D9AD1C45B"},{route:"R269",bound:"O",service_type:"1",seq:"3",stop:"7BB395B6FE66E102"},{route:"R269",bound:"O",service_type:"1",seq:"4",stop:"6D4E7B9D5F9584E7"},{route:"R269",bound:"O",service_type:"1",seq:"5",stop:"47AB1894215AECEE"},{route:"R269",bound:"O",service_type:"1",seq:"6",stop:"42AEF6365E78DA56"},{route:"R269",bound:"O",service_type:"1",seq:"7",stop:"8753A8442C2FFF53"},{route:"R269",bound:"O",service_type:"1",seq:"8",stop:"8D56DB404D264D5A"},{route:"R269",bound:"O",service_type:"1",seq:"9",stop:"67D80F37744E1277"},{route:"R269",bound:"O",service_type:"1",seq:"10",stop:"080EF1BEA737A5D3"},{route:"R269",bound:"O",service_type:"1",seq:"11",stop:"AFB9321F7CD2C2E4"},{route:"R269",bound:"O",service_type:"1",seq:"12",stop:"7898B605E39613A8"},{route:"R269",bound:"O",service_type:"1",seq:"13",stop:"CB853E4BCBB13F30"},{route:"R269",bound:"O",service_type:"1",seq:"14",stop:"C20316E552E64387"},{route:"R269",bound:"O",service_type:"1",seq:"15",stop:"1C0A89BD67A4CFF0"},{route:"R269",bound:"O",service_type:"1",seq:"16",stop:"BCC6E5BA6810FED6"},{route:"R269",bound:"O",service_type:"1",seq:"17",stop:"B02B0B9F73E50D93"},{route:"R269",bound:"O",service_type:"1",seq:"18",stop:"1DEFCF90AB170FD7"},{route:"R269",bound:"O",service_type:"1",seq:"19",stop:"51BD0FD05C62F3F4"},{route:"R269",bound:"O",service_type:"1",seq:"20",stop:"53AC50E46ABDA85B"},{route:"R269",bound:"O",service_type:"1",seq:"21",stop:"591FA32FB4B53682"},{route:"R269",bound:"O",service_type:"1",seq:"22",stop:"447C1D79A10C83E2"},{route:"R269",bound:"O",service_type:"1",seq:"23",stop:"BEEBDDB542A7E709"},{route:"R269",bound:"O",service_type:"1",seq:"24",stop:"68DF2B78CD2B9C76"},{route:"R270",bound:"O",service_type:"1",seq:"1",stop:"CF0C67920B22ED62"},{route:"R270",bound:"O",service_type:"1",seq:"2",stop:"98EBAB9468C80DD2"},{route:"R270",bound:"O",service_type:"1",seq:"3",stop:"6DD6B837EF1FA76C"},{route:"R270",bound:"O",service_type:"1",seq:"4",stop:"AFD29CB1A4F71AB9"},{route:"R270",bound:"O",service_type:"1",seq:"5",stop:"60952B4A38F3D82E"},{route:"R270",bound:"O",service_type:"1",seq:"6",stop:"0E41E02CD9055626"},{route:"R270",bound:"O",service_type:"1",seq:"7",stop:"EE81A30BE4BDC8AC"},{route:"R270",bound:"O",service_type:"1",seq:"8",stop:"F129DD8D9E3268FB"},{route:"R270",bound:"O",service_type:"1",seq:"9",stop:"D0FB28B8EED62431"},{route:"R270",bound:"O",service_type:"1",seq:"10",stop:"FA52803E2628A212"},{route:"R270",bound:"O",service_type:"1",seq:"11",stop:"2431FF3100478DEE"},{route:"R270",bound:"O",service_type:"1",seq:"12",stop:"ED6FCB0422D541F5"},{route:"R270",bound:"O",service_type:"1",seq:"13",stop:"850F72123F644500"},{route:"R270",bound:"O",service_type:"1",seq:"14",stop:"98FCC750B322B706"},{route:"R270",bound:"O",service_type:"1",seq:"15",stop:"66C6FDFC88F56E51"},{route:"R270",bound:"O",service_type:"1",seq:"16",stop:"7CD8F96A087CDDF2"},{route:"R270",bound:"O",service_type:"1",seq:"17",stop:"68DF2B78CD2B9C76"},{route:"R271",bound:"O",service_type:"1",seq:"1",stop:"67FC11E66080F9C2"},{route:"R271",bound:"O",service_type:"1",seq:"2",stop:"2CC694E5A84B05A0"},{route:"R271",bound:"O",service_type:"1",seq:"3",stop:"5A1A5F0DEB7F8EBE"},{route:"R271",bound:"O",service_type:"1",seq:"4",stop:"7081CE830F3E9B50"},{route:"R271",bound:"O",service_type:"1",seq:"5",stop:"45628FA7B8D7C5D2"},{route:"R271",bound:"O",service_type:"1",seq:"6",stop:"F7DD5A5E7E4D41C9"},{route:"R271",bound:"O",service_type:"1",seq:"7",stop:"3FD481FB9B9DC36C"},{route:"R271",bound:"O",service_type:"1",seq:"8",stop:"062FFE8F1560E8A4"},{route:"R271",bound:"O",service_type:"1",seq:"9",stop:"74648B92E0E80E2E"},{route:"R271",bound:"O",service_type:"1",seq:"10",stop:"4DD5EC5516B360D7"},{route:"R271",bound:"O",service_type:"1",seq:"11",stop:"33ABA49F0E91A247"},{route:"R271",bound:"O",service_type:"1",seq:"12",stop:"023E9E5A9E073E1A"},{route:"R271",bound:"O",service_type:"1",seq:"13",stop:"B464BD6334A93FA1"},{route:"R271",bound:"O",service_type:"1",seq:"14",stop:"5C2A974134634635"},{route:"R271",bound:"O",service_type:"1",seq:"15",stop:"A0D379E172F5BC93"},{route:"R271",bound:"O",service_type:"1",seq:"16",stop:"853CD1316EB5227B"},{route:"R271",bound:"O",service_type:"1",seq:"17",stop:"BE6EC9708F5FB613"},{route:"R271",bound:"O",service_type:"1",seq:"18",stop:"DF9E89A391CAC245"},{route:"R271",bound:"O",service_type:"1",seq:"19",stop:"657E5836BC932790"},{route:"R271",bound:"O",service_type:"1",seq:"20",stop:"850F72123F644500"},{route:"R271",bound:"O",service_type:"1",seq:"21",stop:"98FCC750B322B706"},{route:"R271",bound:"O",service_type:"1",seq:"22",stop:"66C6FDFC88F56E51"},{route:"R271",bound:"O",service_type:"1",seq:"23",stop:"7CD8F96A087CDDF2"},{route:"R271",bound:"O",service_type:"1",seq:"24",stop:"68DF2B78CD2B9C76"},{route:"R283",bound:"O",service_type:"1",seq:"1",stop:"24F7097D1D913EC5"},{route:"R283",bound:"O",service_type:"1",seq:"2",stop:"F0B624403EB4108C"},{route:"R283",bound:"O",service_type:"1",seq:"3",stop:"69E4C417312C10C0"},{route:"R283",bound:"O",service_type:"1",seq:"4",stop:"C1E1199805BCC92D"},{route:"R283",bound:"O",service_type:"1",seq:"5",stop:"A0496DDDC41213FA"},{route:"R283",bound:"O",service_type:"1",seq:"6",stop:"51B9CE80774449E9"},{route:"R283",bound:"O",service_type:"1",seq:"7",stop:"16E1175180DCF777"},{route:"R283",bound:"O",service_type:"1",seq:"8",stop:"5DA6860E45D1384C"},{route:"R283",bound:"O",service_type:"1",seq:"9",stop:"459C4588BE4A2105"},{route:"R283",bound:"O",service_type:"1",seq:"10",stop:"9F527C21FE33EF58"},{route:"R283",bound:"O",service_type:"1",seq:"11",stop:"0333C7A4008A8DE3"},{route:"R283",bound:"O",service_type:"1",seq:"12",stop:"B93951057E6B1BB1"},{route:"R283",bound:"O",service_type:"1",seq:"13",stop:"FA655954F0EFD491"},{route:"R283",bound:"O",service_type:"1",seq:"14",stop:"E00F663184A45549"},{route:"R283",bound:"O",service_type:"1",seq:"15",stop:"A6631CAD2E2DE2A6"},{route:"R283",bound:"O",service_type:"1",seq:"16",stop:"7748DCD4522FB72F"},{route:"R283",bound:"O",service_type:"1",seq:"17",stop:"363957ECE0924AC4"},{route:"R283",bound:"O",service_type:"1",seq:"18",stop:"460D29054B1D54B1"},{route:"R283",bound:"O",service_type:"1",seq:"19",stop:"60F6F482EFA8FE18"},{route:"R283",bound:"O",service_type:"1",seq:"20",stop:"AD0E19B05666A22B"},{route:"R283",bound:"O",service_type:"1",seq:"21",stop:"C7C1C12D89968698"},{route:"R283",bound:"O",service_type:"1",seq:"22",stop:"BEEBDDB542A7E709"},{route:"R283",bound:"O",service_type:"1",seq:"23",stop:"68DF2B78CD2B9C76"},{route:"R287",bound:"O",service_type:"1",seq:"1",stop:"91CD1740B6AC752B"},{route:"R287",bound:"O",service_type:"1",seq:"2",stop:"8337F935242C5CC3"},{route:"R287",bound:"O",service_type:"1",seq:"3",stop:"0D4E07F475845DB3"},{route:"R287",bound:"O",service_type:"1",seq:"4",stop:"B071B60F5566934B"},{route:"R287",bound:"O",service_type:"1",seq:"5",stop:"8507CD56EB29D1CF"},{route:"R287",bound:"O",service_type:"1",seq:"6",stop:"BA6D9F93E62B8075"},{route:"R287",bound:"O",service_type:"1",seq:"7",stop:"842DC076B16BE3A2"},{route:"R287",bound:"O",service_type:"1",seq:"8",stop:"F1F906098E7C35E9"},{route:"R287",bound:"O",service_type:"1",seq:"9",stop:"496BF5ECB5F376CB"},{route:"R287",bound:"O",service_type:"1",seq:"10",stop:"A07D2012213FC19D"},{route:"R287",bound:"O",service_type:"1",seq:"11",stop:"9E87D9D0191DACE9"},{route:"R287",bound:"O",service_type:"1",seq:"12",stop:"8019E4CBB686CD25"},{route:"R287",bound:"O",service_type:"1",seq:"13",stop:"ECE98AAA81373891"},{route:"R287",bound:"O",service_type:"1",seq:"14",stop:"BF4622C022F17E9D"},{route:"R287",bound:"O",service_type:"1",seq:"15",stop:"F508350699744D24"},{route:"R287",bound:"O",service_type:"1",seq:"16",stop:"34740DD5ABC36F12"},{route:"R287",bound:"O",service_type:"1",seq:"17",stop:"25E1BAE2C272ED4C"},{route:"R287",bound:"O",service_type:"1",seq:"18",stop:"823E3EE2413E40E2"},{route:"R287",bound:"O",service_type:"1",seq:"19",stop:"E7133179F5800E85"},{route:"R287",bound:"O",service_type:"1",seq:"20",stop:"BEEBDDB542A7E709"},{route:"R287",bound:"O",service_type:"1",seq:"21",stop:"68DF2B78CD2B9C76"},{route:"R298",bound:"O",service_type:"1",seq:"1",stop:"D4D418BAEAC719B0"},{route:"R298",bound:"O",service_type:"1",seq:"2",stop:"ABC15E2110BF7A49"},{route:"R298",bound:"O",service_type:"1",seq:"3",stop:"BC66863007C0592B"},{route:"R298",bound:"O",service_type:"1",seq:"4",stop:"848CA90EB0DB1146"},{route:"R298",bound:"O",service_type:"1",seq:"5",stop:"7486D53F341F1AAC"},{route:"R298",bound:"O",service_type:"1",seq:"6",stop:"FC42DCBDC3AB0B6F"},{route:"R298",bound:"O",service_type:"1",seq:"7",stop:"22E2678081E88368"},{route:"R298",bound:"O",service_type:"1",seq:"8",stop:"7613538D58A9C452"},{route:"R298",bound:"O",service_type:"1",seq:"9",stop:"9B0382206D441221"},{route:"R298",bound:"O",service_type:"1",seq:"10",stop:"54FCA9F5D8F3587E"},{route:"R298",bound:"O",service_type:"1",seq:"12",stop:"9762FC524B26C4A7"},{route:"R298",bound:"O",service_type:"1",seq:"12",stop:"BEEBDDB542A7E709"},{route:"R298",bound:"O",service_type:"1",seq:"13",stop:"68DF2B78CD2B9C76"},{route:"R307",bound:"O",service_type:"1",seq:"1",stop:"F9AB54847EF884BB"},{route:"R307",bound:"O",service_type:"1",seq:"2",stop:"8C1810DE2419A30B"},{route:"R307",bound:"O",service_type:"1",seq:"3",stop:"56F79FB1FC157E22"},{route:"R307",bound:"O",service_type:"1",seq:"4",stop:"95B249916F323BD4"},{route:"R307",bound:"O",service_type:"1",seq:"5",stop:"F1F1C3A91C6EB439"},{route:"R307",bound:"O",service_type:"1",seq:"6",stop:"27222F0DE22582ED"},{route:"R307",bound:"O",service_type:"1",seq:"7",stop:"ACDCC9E65172243D"},{route:"R307",bound:"O",service_type:"1",seq:"8",stop:"12E4BAFA2B73435B"},{route:"R307",bound:"O",service_type:"1",seq:"9",stop:"DF9E89A391CAC245"},{route:"R307",bound:"O",service_type:"1",seq:"10",stop:"657E5836BC932790"},{route:"R307",bound:"O",service_type:"1",seq:"11",stop:"850F72123F644500"},{route:"R307",bound:"O",service_type:"1",seq:"12",stop:"98FCC750B322B706"},{route:"R307",bound:"O",service_type:"1",seq:"13",stop:"66C6FDFC88F56E51"},{route:"R307",bound:"O",service_type:"1",seq:"14",stop:"7CD8F96A087CDDF2"},{route:"R307",bound:"O",service_type:"1",seq:"15",stop:"4D3CBBDB95447F2E"},{route:"R307",bound:"O",service_type:"1",seq:"16",stop:"76B4054F2E1F00B0"},{route:"R307",bound:"O",service_type:"1",seq:"17",stop:"17B98BD1165A7B92"},{route:"R603",bound:"O",service_type:"1",seq:"1",stop:"FBE07247C3FDB904"},{route:"R603",bound:"O",service_type:"1",seq:"2",stop:"EC1E1868D370F3D9"},{route:"R603",bound:"O",service_type:"1",seq:"3",stop:"057B2DCE8BE58FFA"},{route:"R603",bound:"O",service_type:"1",seq:"4",stop:"4A91A327C9FC745E"},{route:"R603",bound:"O",service_type:"1",seq:"5",stop:"EA2CFF27310EAEC3"},{route:"R603",bound:"O",service_type:"1",seq:"6",stop:"3C0AF6BA82588E2F"},{route:"R603",bound:"O",service_type:"1",seq:"7",stop:"F8DEE1D5F9A349AD"},{route:"R603",bound:"O",service_type:"1",seq:"8",stop:"4A14A012710E80B1"},{route:"R603",bound:"O",service_type:"1",seq:"9",stop:"3216F11DA45B80D7"},{route:"R603",bound:"O",service_type:"1",seq:"10",stop:"6F106FD26B684372"},{route:"R603",bound:"O",service_type:"1",seq:"11",stop:"26305AF62FBEE2BC"},{route:"R603",bound:"O",service_type:"1",seq:"12",stop:"D83C4CC1305E35E9"},{route:"R603",bound:"O",service_type:"1",seq:"13",stop:"13A8D09F9E444BF3"},{route:"R603",bound:"O",service_type:"1",seq:"14",stop:"EF17FDCDDF170D38"},{route:"R603",bound:"O",service_type:"1",seq:"15",stop:"C1E7742780E828E9"},{route:"R603",bound:"O",service_type:"1",seq:"16",stop:"80C801672D7D560D"},{route:"R603",bound:"O",service_type:"1",seq:"17",stop:"DA29C9192B8D12DC"},{route:"R603",bound:"O",service_type:"1",seq:"18",stop:"3144CE950CE29C80"},{route:"R603",bound:"O",service_type:"1",seq:"19",stop:"543FD8B6C65D1C4C"},{route:"R603",bound:"O",service_type:"1",seq:"20",stop:"316BB2C947568585"},{route:"R603",bound:"O",service_type:"1",seq:"21",stop:"3E862B92873F5811"},{route:"R603",bound:"O",service_type:"1",seq:"22",stop:"57A0D4D6D4D57497"},{route:"R603",bound:"O",service_type:"1",seq:"23",stop:"0F9D050D4229C0F7"},{route:"R603",bound:"O",service_type:"1",seq:"24",stop:"19171A194D7507D5"},{route:"R603",bound:"O",service_type:"1",seq:"25",stop:"F60CC440E22B0BD9"},{route:"R603",bound:"O",service_type:"1",seq:"26",stop:"3C6DAB7267F9E54F"},{route:"R603",bound:"O",service_type:"1",seq:"27",stop:"73E85E88E124EF2C"},{route:"R603",bound:"O",service_type:"1",seq:"28",stop:"2EF9764BE18FC290"},{route:"R603",bound:"O",service_type:"1",seq:"29",stop:"FF6E49051D6D9A8C"},{route:"R603",bound:"O",service_type:"1",seq:"30",stop:"06C9926B2E2B304F"},{route:"R603",bound:"O",service_type:"1",seq:"31",stop:"76B4054F2E1F00B0"},{route:"R603",bound:"O",service_type:"1",seq:"32",stop:"17B98BD1165A7B92"},{route:"R673",bound:"O",service_type:"1",seq:"1",stop:"4EB92F34598243DB"},{route:"R673",bound:"O",service_type:"1",seq:"2",stop:"6F11F73C749338DB"},{route:"R673",bound:"O",service_type:"1",seq:"3",stop:"940F276037968281"},{route:"R673",bound:"O",service_type:"1",seq:"4",stop:"D3E18D04B69DF388"},{route:"R673",bound:"O",service_type:"1",seq:"5",stop:"C4F843F93CDCBE64"},{route:"R673",bound:"O",service_type:"1",seq:"6",stop:"4235BA400EB10F0E"},{route:"R673",bound:"O",service_type:"1",seq:"7",stop:"879A98CD29D9433F"},{route:"R673",bound:"O",service_type:"1",seq:"8",stop:"A22E315AD21129EB"},{route:"R673",bound:"O",service_type:"1",seq:"9",stop:"944EC71DD1731BE0"},{route:"R673",bound:"O",service_type:"1",seq:"10",stop:"EF78DD9F765C6565"},{route:"R673",bound:"O",service_type:"1",seq:"11",stop:"BFAE1E951D3B63EC"},{route:"R673",bound:"O",service_type:"1",seq:"12",stop:"C67060F448591E4F"},{route:"R673",bound:"O",service_type:"1",seq:"13",stop:"F7D40D08CB05EA87"},{route:"R673",bound:"O",service_type:"1",seq:"14",stop:"2129B2A72F881300"},{route:"R673",bound:"O",service_type:"1",seq:"15",stop:"4CA5DEBCC576E371"},{route:"R673",bound:"O",service_type:"1",seq:"16",stop:"DF9E89A391CAC245"},{route:"R673",bound:"O",service_type:"1",seq:"17",stop:"657E5836BC932790"},{route:"R673",bound:"O",service_type:"1",seq:"18",stop:"850F72123F644500"},{route:"R673",bound:"O",service_type:"1",seq:"19",stop:"98FCC750B322B706"},{route:"R673",bound:"O",service_type:"1",seq:"20",stop:"66C6FDFC88F56E51"},{route:"R673",bound:"O",service_type:"1",seq:"21",stop:"7CD8F96A087CDDF2"},{route:"R673",bound:"O",service_type:"1",seq:"22",stop:"4D3CBBDB95447F2E"},{route:"R673",bound:"O",service_type:"1",seq:"23",stop:"76B4054F2E1F00B0"},{route:"R673",bound:"O",service_type:"1",seq:"24",stop:"17B98BD1165A7B92"},{route:"R678",bound:"O",service_type:"1",seq:"1",stop:"940F276037968281"},{route:"R678",bound:"O",service_type:"1",seq:"2",stop:"98EBAB9468C80DD2"},{route:"R678",bound:"O",service_type:"1",seq:"3",stop:"6DD6B837EF1FA76C"},{route:"R678",bound:"O",service_type:"1",seq:"4",stop:"AFD29CB1A4F71AB9"},{route:"R678",bound:"O",service_type:"1",seq:"5",stop:"60952B4A38F3D82E"},{route:"R678",bound:"O",service_type:"1",seq:"6",stop:"0E41E02CD9055626"},{route:"R678",bound:"O",service_type:"1",seq:"7",stop:"EE81A30BE4BDC8AC"},{route:"R678",bound:"O",service_type:"1",seq:"8",stop:"F7D40D08CB05EA87"},{route:"R678",bound:"O",service_type:"1",seq:"9",stop:"2129B2A72F881300"},{route:"R678",bound:"O",service_type:"1",seq:"10",stop:"4CA5DEBCC576E371"},{route:"R678",bound:"O",service_type:"1",seq:"11",stop:"DF9E89A391CAC245"},{route:"R678",bound:"O",service_type:"1",seq:"12",stop:"657E5836BC932790"},{route:"R678",bound:"O",service_type:"1",seq:"13",stop:"850F72123F644500"},{route:"R678",bound:"O",service_type:"1",seq:"14",stop:"98FCC750B322B706"},{route:"R678",bound:"O",service_type:"1",seq:"15",stop:"66C6FDFC88F56E51"},{route:"R678",bound:"O",service_type:"1",seq:"16",stop:"7CD8F96A087CDDF2"},{route:"R678",bound:"O",service_type:"1",seq:"17",stop:"4D3CBBDB95447F2E"},{route:"R678",bound:"O",service_type:"1",seq:"18",stop:"76B4054F2E1F00B0"},{route:"R678",bound:"O",service_type:"1",seq:"19",stop:"17B98BD1165A7B92"},{route:"R680",bound:"O",service_type:"1",seq:"1",stop:"4D8E5172E1C1EAF5"},{route:"R680",bound:"O",service_type:"1",seq:"2",stop:"D156C558FF163BE3"},{route:"R680",bound:"O",service_type:"1",seq:"3",stop:"013F884CBCB1CBE4"},{route:"R680",bound:"O",service_type:"1",seq:"4",stop:"BA6D9F93E62B8075"},{route:"R680",bound:"O",service_type:"1",seq:"5",stop:"028E0B68D3166C00"},{route:"R680",bound:"O",service_type:"1",seq:"6",stop:"1D6A8B8C58C268FF"},{route:"R680",bound:"O",service_type:"1",seq:"7",stop:"F86BDB236D6ACDC3"},{route:"R680",bound:"O",service_type:"1",seq:"8",stop:"664BAA2EA12B80B1"},{route:"R680",bound:"O",service_type:"1",seq:"9",stop:"30553FA19D045D25"},{route:"R680",bound:"O",service_type:"1",seq:"10",stop:"4A3D71FFAB41B756"},{route:"R680",bound:"O",service_type:"1",seq:"11",stop:"A78292AA77A277A7"},{route:"R680",bound:"O",service_type:"1",seq:"12",stop:"578C11F0F4197509"},{route:"R680",bound:"O",service_type:"1",seq:"13",stop:"A295FD27A4E5A7C5"},{route:"R680",bound:"O",service_type:"1",seq:"14",stop:"C43782B93826F4CD"},{route:"R680",bound:"O",service_type:"1",seq:"15",stop:"4D3CBBDB95447F2E"},{route:"R680",bound:"O",service_type:"1",seq:"16",stop:"F948129B464BB963"},{route:"R680",bound:"O",service_type:"1",seq:"17",stop:"76B4054F2E1F00B0"},{route:"R680",bound:"O",service_type:"1",seq:"18",stop:"17B98BD1165A7B92"},{route:"R960",bound:"O",service_type:"1",seq:"1",stop:"595CE3974AB6F377"},{route:"R960",bound:"O",service_type:"1",seq:"2",stop:"55E3A1A6E995A9CB"},{route:"R960",bound:"O",service_type:"1",seq:"3",stop:"2FA997A1BE419A52"},{route:"R960",bound:"O",service_type:"1",seq:"4",stop:"8FA8E142E834CB7C"},{route:"R960",bound:"O",service_type:"1",seq:"5",stop:"92A09EC9B712A1ED"},{route:"R960",bound:"O",service_type:"1",seq:"6",stop:"4885700825A72F51"},{route:"R960",bound:"O",service_type:"1",seq:"7",stop:"A1541789F09C89BA"},{route:"R960",bound:"O",service_type:"1",seq:"8",stop:"D073CC71A1B4F79C"},{route:"R960",bound:"O",service_type:"1",seq:"9",stop:"B64EEA7F564C7853"},{route:"R960",bound:"O",service_type:"1",seq:"10",stop:"46D1A9FD1F84CA5C"},{route:"R960",bound:"O",service_type:"1",seq:"11",stop:"E01BD8E1BEC29EA6"},{route:"R960",bound:"O",service_type:"1",seq:"12",stop:"E16D49ECA536ECC6"},{route:"R960",bound:"O",service_type:"1",seq:"13",stop:"F224A907BD68406A"},{route:"R960",bound:"O",service_type:"1",seq:"14",stop:"4F36FEF121788834"},{route:"R960",bound:"O",service_type:"1",seq:"15",stop:"ECE3F3BE270C27E2"},{route:"R960",bound:"O",service_type:"1",seq:"16",stop:"594A765BE3A43C73"},{route:"R960",bound:"O",service_type:"1",seq:"17",stop:"507D90B4B976DBD6"},{route:"R960",bound:"O",service_type:"1",seq:"18",stop:"1F6BFDF34BABCE6A"},{route:"R960",bound:"O",service_type:"1",seq:"19",stop:"19B569A51034271F"},{route:"R960",bound:"O",service_type:"1",seq:"20",stop:"1AD9C759A42F9003"},{route:"R960",bound:"O",service_type:"1",seq:"21",stop:"EB64718829DFC071"},{route:"R960",bound:"O",service_type:"1",seq:"22",stop:"92A8D40E66E76F6B"},{route:"R960",bound:"O",service_type:"1",seq:"23",stop:"DD56DC2336C878C1"},{route:"R960",bound:"O",service_type:"1",seq:"24",stop:"8121695666A4D9CE"},{route:"R960",bound:"O",service_type:"1",seq:"25",stop:"C2787E27F82716BF"},{route:"R960",bound:"O",service_type:"1",seq:"26",stop:"ACB5FEA2BF9FC5AD"},{route:"R960",bound:"O",service_type:"1",seq:"27",stop:"06C9926B2E2B304F"},{route:"R960",bound:"O",service_type:"1",seq:"28",stop:"76B4054F2E1F00B0"},{route:"R960",bound:"O",service_type:"1",seq:"29",stop:"17B98BD1165A7B92"},{route:"R961",bound:"O",service_type:"1",seq:"1",stop:"2297CADDD7BC438D"},{route:"R961",bound:"O",service_type:"1",seq:"2",stop:"B3CCA98CC6CE7C8C"},{route:"R961",bound:"O",service_type:"1",seq:"3",stop:"490F1A302D8C32FC"},{route:"R961",bound:"O",service_type:"1",seq:"4",stop:"79D68EE7C6CBAB9D"},{route:"R961",bound:"O",service_type:"1",seq:"5",stop:"C1BF4509359B0895"},{route:"R961",bound:"O",service_type:"1",seq:"6",stop:"C425164651C7EF52"},{route:"R961",bound:"O",service_type:"1",seq:"7",stop:"ABDD74161F650B6E"},{route:"R961",bound:"O",service_type:"1",seq:"8",stop:"123A364D76B2CE5D"},{route:"R961",bound:"O",service_type:"1",seq:"9",stop:"ACB5FEA2BF9FC5AD"},{route:"R961",bound:"O",service_type:"1",seq:"10",stop:"06C9926B2E2B304F"},{route:"R961",bound:"O",service_type:"1",seq:"11",stop:"76B4054F2E1F00B0"},{route:"R961",bound:"O",service_type:"1",seq:"12",stop:"17B98BD1165A7B92"},{route:"R968",bound:"O",service_type:"1",seq:"1",stop:"E81DF9AB738F076E"},{route:"R968",bound:"O",service_type:"1",seq:"2",stop:"C8FF8B4A87A98184"},{route:"R968",bound:"O",service_type:"1",seq:"3",stop:"D412D24055680560"},{route:"R968",bound:"O",service_type:"1",seq:"4",stop:"5169CFB5102E1129"},{route:"R968",bound:"O",service_type:"1",seq:"5",stop:"C5890150706FE1A0"},{route:"R968",bound:"O",service_type:"1",seq:"6",stop:"283BB233842FCCEB"},{route:"R968",bound:"O",service_type:"1",seq:"7",stop:"B02B0B9F73E50D93"},{route:"R968",bound:"O",service_type:"1",seq:"8",stop:"C296D9B3313C1F77"},{route:"R968",bound:"O",service_type:"1",seq:"9",stop:"AD4CB5E1CAAF8063"},{route:"R968",bound:"O",service_type:"1",seq:"10",stop:"723EF8D7809D3ADB"},{route:"R968",bound:"O",service_type:"1",seq:"11",stop:"591FA32FB4B53682"},{route:"R968",bound:"O",service_type:"1",seq:"12",stop:"211D93217331B040"},{route:"R968",bound:"O",service_type:"1",seq:"13",stop:"06C9926B2E2B304F"},{route:"R968",bound:"O",service_type:"1",seq:"14",stop:"76B4054F2E1F00B0"},{route:"R968",bound:"O",service_type:"1",seq:"15",stop:"17B98BD1165A7B92"}],st="Desc_CHI",G=new Map;async function rt(){const e=await fetch("https://data.etabus.gov.hk/v1/transport/kmb/route/");if(!e.ok)throw new Error(`HTTP error! status: ${e.status} ${e.statusText}`);return[...(await e.json()).data,...tt].sort(et)}async function nt(e,s,o){const u=(await(await fetch(`https://data.etabus.gov.hk/v1/transport/kmb/route-stop/${e}/${s==="I"||s==="inbound"?"inbound":"outbound"}/${o}`)).json()).data;return u.length==0?ot.filter(c=>c.route===e&&c.bound===s&&c.service_type===o).map(c=>c.stop):u.map(c=>c.stop)}async function it(e){if(G.has(e))return G.get(e);try{const s=await fetch(`https://data.etabus.gov.hk/v1/transport/kmb/stop/${e}`);if(!s.ok)throw new Error(`HTTP error! status: ${s.status} ${s.statusText}`);const o=await s.json(),r=Je(o);return G.set(e,r),r}catch(s){throw console.error(`Error when fetching stop detail for stopID: ${e}`,s),s}}async function ct(e){return Promise.all(e.map(it))}async function ut(e,s,o){var c,a;const r=Xe(s,"number"),i=await fetch(`https://search.kmb.hk/KMBWebSite/Function/FunctionRequest.ashx?action=getSpecialRoute&route=${e}&bound=${r}`);if(!i.ok)throw new Error(`HTTP error! status: ${i.status} ${i.statusText}`);const u=(a=(c=(await i.json()).data)==null?void 0:c.routes)==null?void 0:a.find(({Route:l,Bound:b,ServiceType:v})=>e===l&&r===b&&o===Qe(v==null?void 0:v.trim()));return(u==null?void 0:u[st])??""}const at={routes:[],isLoading:!1,error:null},pt=()=>async e=>{e(oe(!0));try{const s=await rt(),o=new Map(s.map(n=>[`${n.route}-${n.bound}-${n.service_type}`,n])),r=s.filter(n=>n.service_type!=="1").map(async n=>{const u=await ut(n.route,n.bound,n.service_type),c=`${n.route}-${n.bound}-${n.service_type}`;o.set(c,{...n,specialRemark:u})});await Promise.all(r);const i=Array.from(o.values());localStorage.setItem("routes",JSON.stringify(i)),e(xe(i))}catch(s){console.error("Error fetching routes:",s),e(lt(s.message))}finally{e(oe(!1))}},dt=()=>async e=>{const s=localStorage.getItem("routes");if(s){e(xe(JSON.parse(s)));return}e(pt())},_e=Y({name:"route",initialState:at,reducers:{setRoutes:(e,s)=>{e.routes=s.payload},setLoading:(e,s)=>{e.isLoading=s.payload},setError:(e,s)=>{e.error=s.payload}}}),{setRoutes:xe,setLoading:oe,setError:lt}=_e.actions,bt=_e.reducer,yt={routeDetail:{},currentStopIndex:0,lastStopIndex:0,isUserSelectedRoute:!1,routeHasTwoBound:!1,isLoading:!1,loadingError:null},vt=e=>e.routeSelection.currentStopIndex>0,_t=e=>e.routeSelection.currentStopIndex<e.routeSelection.lastStopIndex,Q=pe("routeSelection/selectRoute",async({routeDetail:e,routes:s},{dispatch:o})=>{o(se(!0)),o(re(null));try{const{route:r,bound:i,service_type:n,orig_tc:u,orig_en:c,dest_tc:a,dest_en:l,specialRemark:b}=e,v=s.some(x=>x.bound==="I"&&x.route===r)&&s.some(x=>x.bound==="O"&&x.route===r);o(Ct(v));const F=await nt(r,i,n),_=await ct(F);o(V(0)),o(xt({route:r,bound:i,stops:_,orig_tc:u,orig_en:c,dest_tc:a,dest_en:l,service_type:n,specialRemark:b})),o(Bt(!0))}catch(r){o(re(r.message))}finally{o(se(!1))}}),me=pe("routeSelection/changeBound",async(e,{getState:s,dispatch:o})=>{const r=s().routeSelection,i=s().route.routes,{routeDetail:n,routeHasTwoBound:u,isUserSelectedRoute:c}=r;if(c&&(u||(n==null?void 0:n.service_type)===1)){const{bound:a,orig_tc:l,dest_tc:b}=n;o(Q({routeDetail:{...n,bound:a==="I"?"O":"I",dest_tc:l,orig_tc:b},routes:i}))}}),Be=Y({name:"routeSelection",initialState:yt,reducers:{setRouteDetail(e,s){var o;e.routeDetail=s.payload,e.lastStopIndex=(((o=s.payload.stops)==null?void 0:o.length)??1)-1},setCurrentStopIndex(e,s){e.currentStopIndex=s.payload},toPrevStop(e){e.currentStopIndex>0&&(e.currentStopIndex-=1)},toNextStop(e){e.currentStopIndex<e.lastStopIndex&&(e.currentStopIndex+=1)},resetToFirstStop(e){e.currentStopIndex=0},setIsUserSelectedRoute(e,s){e.isUserSelectedRoute=s.payload},setRouteHasTwoBound(e,s){e.routeHasTwoBound=s.payload},setIsLoading:(e,s)=>{e.isLoading=s.payload},setLoadingError:(e,s)=>{e.loadingError=s.payload}}}),{setRouteDetail:xt,setCurrentStopIndex:V,toPrevStop:Ce,toNextStop:he,resetToFirstStop:mt,setIsUserSelectedRoute:Bt,setRouteHasTwoBound:Ct,setIsLoading:se,setLoadingError:re}=Be.actions,ht=Be.reducer,Ft={stopPressed:!1,driverInfo:{nameZh:"九巴仔",nameEn:"KMB Boy",staffNo:"1933"},customizeDriverInfoToggle:!1,showMindDoorNotice:!1,showHandrailNotice:!1},Fe=Y({name:"userPreference",initialState:Ft,reducers:{setStopPressed(e,s){e.stopPressed=s.payload},setDriverInfo(e,s){e.driverInfo={...e.driverInfo,...s.payload}},setCustomizeDriverInfoToggle(e,s){e.customizeDriverInfoToggle=s.payload},setShowMindDoorNotice(e,s){e.showMindDoorNotice=s.payload},setShowHandrailNotice(e,s){e.showHandrailNotice=s.payload},setShowHandrailAndMindDoorNotice(e,s){e.showHandrailNotice=s.payload.showHandrailNotice,e.showMindDoorNotice=s.payload.showMindDoorNotice}}}),{setStopPressed:Et,setDriverInfo:Z,setCustomizeDriverInfoToggle:qt,setShowMindDoorNotice:Go,setShowHandrailNotice:Zo,setShowHandrailAndMindDoorNotice:ne}=Fe.actions,gt=Fe.reducer,Ot=Ae({reducer:{route:bt,routeSelection:ht,userPreference:gt}}),ft=we({breakpoints:{values:{xs:480,sm:640,md:768,lg:1024,xl:1280,"2xl":1536,"3xl":1920}},typography:{fontFamily:"Noto Sans, sans-serif"},palette:{darkRed:{main:"#A81919",light:"#EF4444",dark:"#991212",contrastText:"#FFF1F2"},nextGreen:{main:"#089314",light:"#147738",dark:"#077F11",contrastText:"#FFFFFF"},directionPurple:{main:"#822093",light:"#B983D6",dark:"#701C7F",contrastText:"#F3E8FF"},ochre:{main:"#E3D026",light:"#FFF176",dark:"#C4B121",contrastText:"#262A33"},snowwhite:{main:"#FFFFFF"}}}),T={groupWrapper:"flex flex-wrap gap-5 max-md:gap-3 justify-center",switchGroupWrapper:"!gap-4",driverInfoSection:"flex text-center items-center text-white gap-3"},Rt=({mainScreenTarget:e,secScreenTarget:s})=>{const o=h(r=>r.userPreference);return t.jsxs(t.Fragment,{children:[t.jsx("div",{className:T.groupWrapper,children:t.jsx(Ht,{})}),t.jsx("div",{className:T.groupWrapper+" "+T.switchGroupWrapper,children:t.jsx(Wt,{})}),t.jsx("div",{className:T.groupWrapper,children:t.jsx(Lt,{mainScreenTarget:e,secScreenTarget:s})}),o.customizeDriverInfoToggle&&t.jsx("section",{className:T.driverInfoSection,children:t.jsx(Dt,{})})]})},Dt=()=>{const{driverInfo:e}=h(o=>o.userPreference),s=I();return t.jsxs(t.Fragment,{children:[t.jsx(L,{placeholder:"車長中文姓氏 (最多2字)",maxLength:2,value:e==null?void 0:e.nameZh,defaultValue:e==null?void 0:e.nameZh,onChange:o=>{o==""&&(o="九巴仔"),s(Z({nameZh:o}))}}),t.jsx(L,{style:"capitalize",placeholder:"車長英文姓氏 (最多10字)",maxLength:10,value:e==null?void 0:e.nameEn,defaultValue:e==null?void 0:e.nameEn,onChange:o=>{o==""&&(o="KMB Boy"),s(Z({nameEn:o}))}}),t.jsx(L,{placeholder:"職員編號 (1位至6位數字)",type:"number",minLength:1,maxLength:6,value:e==null?void 0:e.staffNo,defaultValue:e==null?void 0:e.staffNo,onInput:o=>o.target.value=Math.abs(o.target.value.slice(0,6)),onChange:o=>{o==""&&(o="1933"),s(Z({staffNo:o}))}})]})},At=({onPrev:e,onNext:s,onHome:o,onEnd:r,isUserSelectedRoute:i=!0,debounceMs:n=50,isDisabled:u=!1})=>{const c=p.useRef(null),a=p.useCallback(l=>{if(!(c.current||u)){switch(l){case"ArrowLeft":e==null||e();break;case"ArrowRight":s==null||s();break;case"Home":o==null||o();break;case"End":r==null||r();break;default:return}c.current=setTimeout(()=>{c.current=null},n)}},[e,s,o,r,n,u]);p.useEffect(()=>{if(!i)return;const l=b=>a(b.key);return window.addEventListener("keydown",l),()=>{window.removeEventListener("keydown",l),c.current&&(clearTimeout(c.current),c.current=null)}},[a,i])},wt=(e,s,o,r)=>p.useMemo(()=>e<=o?[0,e]:s<r?[0,o]:s>=e-o?[e-o,e]:[s-r+1,s-r+1+o],[e,s,o,r]),St=()=>{const[e,s]=p.useState(!1),[o,r]=p.useState(null);return p.useEffect(()=>{const u=localStorage.getItem("userSelection");if(u)try{const c=JSON.parse(u);r(c),s(!0)}catch(c){console.error("Error parsing stored data:",c),localStorage.removeItem("userSelection")}},[]),{hasStoredData:e,storedData:o,saveToLocalStorage:u=>{try{localStorage.setItem("userSelection",JSON.stringify(u))}catch(c){console.error("Error saving to localStorage:",c)}},clearStoredData:()=>{localStorage.removeItem("userSelection"),s(!1),r(null)}}},jt={regular:{},xhtEhc:{backgroundColor:"#CF0001"},marathon:{backgroundColor:"#CF0001"},whc:{backgroundColor:"#027233"},airport:{backgroundColor:"#0A2163",color:"#E3D026"},external:{backgroundColor:"#ff5000"},overnight:{backgroundColor:"#000000"},airportOvernight:{backgroundColor:"#000000",color:"#DED702"},premier:{backgroundColor:"#E5B034"},shuttle:{backgroundColor:"#EB5136",color:"#0E2775"},disneyRecreational:{backgroundColor:"#146FD1"},r8:{backgroundColor:"#72C8E5",color:"#1C2EB5"},awe:{backgroundColor:"#6F2F9F"}},Nt=[{type:"regular",regex:/^(331)[S]?/},{type:"xhtEhc",regex:/^[136]\d{2}[A-Z]?$/},{type:"whc",regex:/^9(?!17|18|45$)\d{2}[A-Z]?$/},{type:"overnight",regex:/^(N(?!A)[A-Z0-9]+|270S|271S|293S)$/i},{type:"airport",regex:/^A/},{type:"airportOvernight",regex:/^NA/},{type:"external",regex:/^E/},{type:"shuttle",regex:/^S(?!P)/},{type:"premier",regex:/^P96[08]$/},{type:"disneyRecreational",regex:/^R(33|42)$/i},{type:"r8",regex:/^R8$/i},{type:"marathon",regex:/^R(108|307|603|673|678|680|934|936|948|960|961|968)$/i},{type:"awe",regex:/^X(33|36|40|43|47)$/i}],kt=()=>{const{isMobile:e}=S(),s=p.useMemo(()=>e?"mobile":"desktop",[e]),o=p.useMemo(()=>({display:"inline-block",textAlign:"center",color:"#FFFFFF",width:e?"42px":"52px",borderRadius:"2px",fontWeight:700}),[e]),r=p.useMemo(()=>({...jt,shared:o}),[o]),i=p.useMemo(()=>new Map,[]);return p.useMemo(()=>u=>{const c=`${u}-${s}`;if(i.has(c))return i.get(c);const a=Nt.find(b=>b.regex.test(u)),l={...r.shared,...r[(a==null?void 0:a.type)??"regular"]};return i.set(u,l),l},[r,i,s])},S=()=>{const[e,s]=p.useState({width:window.innerWidth,height:window.innerHeight,isMobile:window.innerWidth<=768}),o=p.useMemo(()=>ye(()=>{s({width:window.innerWidth,height:window.innerHeight,isMobile:window.innerWidth<=768})},150),[]);return p.useEffect(()=>(window.addEventListener("resize",o),()=>{o.cancel(),window.removeEventListener("resize",o)}),[o]),e},ie=(e,s,o,r=[])=>{p.useEffect(()=>{e.current&&s.current&&(e.current.style.display="block",s.current.style.display="none");const n=setInterval(()=>{if(e.current&&s.current){const u=e.current.style.display!=="none";e.current.style.display=u?"none":"block",s.current.style.display=u?"block":"none"}},o);return()=>clearInterval(n)},r)},It=e=>{const s=e.service_type!=1?ve:"",o=e.specialRemark??"";return`${e.route}${k} ${e.orig_tc} ${X} ${e.dest_tc} ${k}${s}${k}${o}`},K=e=>({label:It(e),value:`${e.route}-${e.bound}-${e.service_type}`,detail:e}),Ee=({componentType:e,data:s,...o})=>{const{isMobile:r}=S(),{label:i}=s,[n,u,c,a=""]=i.split(k),[l,b]=u.split(X),v=e==="Option"?ee.Option:ee.SingleValue,F=p.useMemo(()=>({display:"flex",gap:r?"2px":"4px",alignItems:"center",fontSize:r?"14px":"18px",fontWeight:500,minWidth:0}),[r]);return t.jsx(v,{...o,data:s,children:t.jsxs("div",{style:F,children:[t.jsx($t,{route:n,isSpecial:c==null?void 0:c.includes(ve),componentType:e,isMobile:r}),t.jsx(zt,{origin:l,destination:b,remark:a})]})})},Tt=ae.memo(e=>t.jsx(Ee,{...e,componentType:"Option"})),Pt=ae.memo(e=>t.jsx(Ee,{...e,componentType:"SingleValue"})),Mt=()=>{const{isMobile:e}=S(),s=I(),{routes:o}=h(d=>d.route),{routeDetail:r}=h(d=>d.routeSelection),[i,n]=p.useState(null),[u,c]=p.useState([]),[a,l]=p.useState(!1),b=!o||o.length===0,v=p.useRef(new Map);p.useEffect(()=>{r&&Object.keys(r).length>0&&n(K(r))},[r]);const F=p.useMemo(()=>{var d;return(d=o==null?void 0:o.slice(0,50))==null?void 0:d.map(K)},[o]),_=p.useMemo(()=>ye((d,C)=>{const R=(d==null?void 0:d.toUpperCase())||"";if(v.current.has(R)){const g=v.current.get(R);c(g),C(g),l(!1);return}setTimeout(()=>{try{const D=(d?o.filter(W=>W.route.toUpperCase().startsWith(R)):o.slice(0,50)).slice(0,50).map(W=>K(W,!1));v.current.set(R,D),c(D),C(D),l(!1)}catch(g){console.error("Search error:",g),l(!1)}},0)},150),[o]);p.useEffect(()=>{const d=v.current;return()=>{_.cancel(),d.clear()}},[_]);const x=p.useCallback((d,C)=>{l(!0),_(d,C)},[_]),y=p.useCallback(d=>{if(!d){n(null);return}s(Q({routeDetail:d.detail,routes:o})),n(d)},[s,o]),E=p.useMemo(()=>({control:(d,C)=>({...d,backgroundColor:"rgba(24, 27, 27, 0.5)",color:"#fff",boxShadow:C.isFocused?"0 0 0 2px #2563eb":d.boxShadow,height:e?36:42,minHeight:e?36:42,border:`2px solid ${C.isFocused?"#2563eb":"#444"}`}),menu:d=>({...d,backgroundColor:"rgba(35, 39, 47, 0.85)",color:"#fff",zIndex:9999,fontSize:e?"14px":d.fontSize}),menuList:d=>({...d,maxHeight:e?"250px":"500px",overflowY:"auto"}),placeholder:d=>({...d,color:"#777",opacity:1}),option:(d,C)=>({...d,border:`2px solid ${C.isFocused?"#2563eb":"transparent"}`,borderRadius:"6px",backgroundColor:C.isFocused?"rgba(0, 0, 0, 1)":"rgba(32, 36, 38, 0.9)",color:"#fff"}),input:d=>({...d,color:"#fff"}),singleValue:d=>({...d,color:"#fff"}),indicatorSeparator:(d,C)=>({...d,backgroundColor:C.isFocused?"#2563eb":"#444"}),dropdownIndicator:(d,C)=>({...d,color:C.isFocused?"#2563eb":"#444","&:hover":{color:"#444"}}),clearIndicator:(d,C)=>({...d,color:C.isFocused?"#2563eb":"#444","&:hover":{color:"#999"}})}),[e]);return t.jsx(Ue,{components:{Option:Tt,SingleValue:Pt},classNamePrefix:"routeInputSelect",menuPortalTarget:document.body,styles:E,isDisabled:b,isClearable:!0,cacheOptions:!0,defaultOptions:u.length?u:F,placeholder:b?t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",zIndex:10},children:[t.jsx(Ve,{color:"#2563eb",size:25}),t.jsx("span",{children:"正在同步路線數據..."})]}):"輸入九巴路線編號　Input KMB route.",loadingMessage:()=>"搜尋路線中...",isLoading:a,filterOption:null,loadOptions:x,value:i,onChange:y})},$t=({route:e,isSpecial:s,componentType:o})=>{const{isMobile:r}=S(),i=kt(),n=p.useMemo(()=>({routeLabel:{display:o==="Option"?"inline-flex":"flex",flexDirection:o==="Option"?"column":"row",gap:o==="Option"?0:"4px",width:o==="Option"?r?"36px":"52px":"fit-content",alignItems:"center",justifyContent:"center",letterSpacing:"-0.25px",minWidth:r?"40px":"52px",position:"relative",transform:"scale(1, 1.1)"},specialTrip:{marginTop:"2px",fontSize:r?"10px":"12px",padding:r?"1px 4px":"2px 6px",border:"1px solid rgba(8, 28, 81, 1)",borderRadius:"4px",backgroundColor:"rgba(255, 214, 0, 0.75)",color:"#000",lineHeight:1.1,maxWidth:"100%",textAlign:"center"}}),[r,o]);return t.jsxs("div",{style:n.routeLabel,children:[t.jsx("span",{style:i(e),children:e}),s&&t.jsx("span",{style:n.specialTrip,children:"特別班"})]})},zt=({origin:e,destination:s,remark:o})=>{const{isMobile:r}=S(),i=p.useMemo(()=>({wrapper:{display:"inline-flex",letterSpacing:r?"0":"0.25px",alignItems:"center",gap:r?"4px":"8px",minWidth:0,flexWrap:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},special:{fontSize:r?"12px":"15px",textAlign:"center",maxWidth:r?"120px":"none",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},to:{fontSize:r?"10px":"14px",marginTop:"1.5px",fontWeight:400}}),[r]);return t.jsxs(t.Fragment,{children:[t.jsx("span",{children:k}),t.jsxs("div",{style:i.wrapper,children:[e,t.jsx("span",{style:i.to,children:X}),s]}),t.jsx("span",{children:k}),o&&t.jsx("span",{style:i.special,children:o})]})},w=e=>{const s=de(),{isMobile:o}=S();return p.useMemo(()=>{var r;return{button:{margin:0,backgroundColor:i=>{var n;return((n=i.palette[e])==null?void 0:n.main)||i.palette.primary.main},color:i=>{var n;return(n=i.palette[e])==null?void 0:n.contrastText},borderRadius:2,boxShadow:"0 2px 8px 0 rgba(0,0,0,0.10)",fontFamily:"Zen Kaku Gothic Antique",fontWeight:500,fontSize:o?"1.1rem":"1rem",height:o?"64px":"48px",px:2,py:1,textTransform:"none",transition:"all 0.2s ease-in-out",outline:"none","&:hover":{backgroundColor:i=>{var n;return((n=i.palette[e])==null?void 0:n.dark)||i.palette.primary.dark},boxShadow:"0 6px 24px 0 rgba(37,99,235,0.18)",filter:"brightness(1.08)",transform:"translateY(-2px) scale(1.04)",outline:`2.5px solid ${(r=s.palette[e])==null?void 0:r.dark}`,outlineOffset:"1px"},"&:focus-visible":{outline:"2.5px solid #2563eb",outlineOffset:"1px"},"&:active":{boxShadow:"0 1px 4px 0 rgba(0,0,0,0.12)",filter:"brightness(0.97)",transform:"scale(0.98)"},"&.Mui-disabled":{backgroundColor:"#2d2b2b !important",color:"#595555 !important",boxShadow:"none",opacity:1,border:"1px solid #2d2b2b",cursor:"not-allowed"}},label:{fontSize:o?"1.25rem":"1rem",whiteSpace:"nowrap",fontFamily:"Zen Kaku Gothic Antique",fontWeight:500},labelWrapper:{display:"flex",alignItems:"center",gap:6},switch:{"& .MuiSwitch-switchBase.Mui-checked":{color:i=>{var n;return((n=i.palette[e])==null?void 0:n.light)||i.palette.primary.light},"&:hover":{backgroundColor:i=>{var n;return Se(((n=i.palette[e])==null?void 0:n.light)||i.palette.primary.light,.08)}}},"& .MuiSwitch-switchBase.Mui-checked + .MuiSwitch-track":{backgroundColor:i=>{var n;return((n=i.palette[e])==null?void 0:n.dark)||i.palette.primary.dark},opacity:.75},transform:o?"scale(1.5)":"scale(1.1)"},switchLabel:{display:"flex",alignItems:"center",gap:o?2:1}}},[e,o,s])},Lt=({mainScreenTarget:e,secScreenTarget:s})=>{const{isUserSelectedRoute:o}=h(c=>c.routeSelection),{customizeDriverInfoToggle:r}=h(c=>c.userPreference),i=I(),n=w("info"),u=[{key:"main",target:e,label:"主螢幕全螢幕"},{key:"sec",target:s,label:"輔螢幕全螢幕"}];return t.jsxs(t.Fragment,{children:[t.jsx(j,{arrow:!0,placement:"bottom-start",title:"自定義車長資料顯示",children:t.jsx("span",{children:t.jsx(N,{sx:n.button,color:"ochre",variant:"contained",startIcon:t.jsx(je,{}),onClick:()=>{i(qt(!r))},children:t.jsx("span",{className:n.label,children:"更改車長資料"})})})}),u.map(({key:c,target:a,label:l})=>t.jsx(j,{className:n.fullscreenTooltip,arrow:!0,placement:"bottom-start",title:"選擇路線後才能開啟全螢幕顯示功能",children:t.jsx("span",{children:t.jsx(N,{sx:{...n.button,display:{xs:"none",md:"inline-block"}},color:"info",variant:"contained",disabled:!o,className:n.button,startIcon:t.jsx(Ne,{}),onClick:()=>{a.current.requestFullscreen()},children:t.jsx("span",{children:l})})})},c))]})},Wt=()=>{const{stopPressed:e,showHandrailNotice:s,showMindDoorNotice:o}=h(u=>u.userPreference),r=I(),i=w("darkRed"),n=w("ochre");return t.jsxs(t.Fragment,{children:[t.jsx(U,{sx:i.button,control:t.jsx(H,{checked:e,onChange:()=>r(Et(!e)),name:"stop pressed",sx:i.switch}),label:t.jsxs("span",{style:i.labelWrapper,children:[t.jsx(ke,{color:"snowwhite"}),t.jsx(z,{variant:"button",sx:i.label,children:e?"  解除":" 按鐘"})]})}),t.jsx(U,{sx:n.button,control:t.jsx(H,{checked:s,color:"gold",onChange:()=>{r(ne({showHandrailNotice:!s,showMindDoorNotice:o&&!1}))},name:"handrail notice",sx:n.switch}),label:t.jsxs("span",{style:n.labelWrapper,children:[t.jsx(Ie,{}),t.jsx(z,{sx:n.label,variant:"button",children:"請緊握扶手"})]})}),t.jsx(U,{sx:n.button,control:t.jsx(H,{checked:o,color:"gold",onChange:()=>{r(ne({showMindDoorNotice:!o,showHandrailNotice:s&&!1}))},name:"mind door notice",sx:n.switch}),label:t.jsxs("span",{style:n.labelWrapper,children:[t.jsx(Te,{}),t.jsx(z,{sx:n.label,variant:"button",children:"車門正在關上"})]})})]})},Ht=()=>{const e=I(),{currentStopIndex:s,isUserSelectedRoute:o,routeDetail:r,routeHasTwoBound:i}=h(v=>v.routeSelection),n=h(vt),u=h(_t),c=w("nextGreen"),a=w("darkRed"),l=w("ochre"),b=w("directionPurple");return t.jsxs(t.Fragment,{children:[t.jsx(j,{arrow:!0,placement:"bottom-start",title:"上一站 鍵盤快捷鍵: '←'",children:t.jsx("span",{children:t.jsx(N,{color:"darkRed",variant:"contained",sx:a.button,startIcon:t.jsx(Pe,{}),onClick:()=>e(Ce()),disabled:!n,children:t.jsx("span",{className:a.buttonLabel,children:"上站"})})})}),t.jsx(j,{arrow:!0,placement:"bottom-start",title:"下一站 鍵盤快捷鍵: '→'",children:t.jsx("span",{children:t.jsx(N,{color:"nextGreen",variant:"contained",sx:c.button,startIcon:t.jsx(Me,{}),onClick:()=>e(he()),disabled:!u,children:t.jsx("span",{className:c.buttonLabel,children:"下站"})})})}),t.jsx(j,{arrow:!0,placement:"bottom-start",title:"切換路線方向 鍵盤快捷鍵: 'END'",children:t.jsx("span",{children:t.jsx(N,{color:"directionPurple",variant:"contained",sx:b.button,startIcon:t.jsx($e,{}),onClick:()=>e(me()),disabled:!o||!i||(r==null?void 0:r.service_type)!=1,children:t.jsx("span",{className:b.buttonLabel,children:"方向"})})})}),t.jsx(j,{arrow:!0,placement:"bottom-start",title:"重設至首站 鍵盤快捷鍵: 'HOME'",children:t.jsx("span",{children:t.jsx(N,{className:l.button,color:"ochre",variant:"contained",startIcon:t.jsx(ze,{}),sx:l.button,onClick:()=>e(mt()),disabled:!o||s==0,children:t.jsx("span",{className:l.buttonLabel,children:"首站"})})})})]})},Gt=11e3,Zt=4500,P={parentGrid:["select-none","grid","grid-rows-[0.5fr_1.85fr_0.0375fr_1fr_0.125fr]"].join(" "),nextStopIndicatorGrid:["@container","col-start-1 col-end-2","flex flex-col items-center justify-center","text-center"].join(" "),nextStopIndicatorZh:["text-[15cqw]","mb-[-4px]","font-[600]","max-sm:text-[16cqw]","max-sm:mb-[-1px]"].join(" "),nextStopIndicatorEn:["text-[7.5cqw]","max-sm:text-[9cqw]","font-[400]"].join(" "),routeHeadingGrid:["@container","col-start-2 col-end-5","flex items-center gap-1","pl-0.5","bg-black text-white"].join(" "),stopProgressBarGrid:["@container","col-start-1 col-end-5","bg-white"].join(" "),stopProgressBarContainer:["h-full","font-[400]","text-center","tracking-tight"].join(" "),dividerGrid:["col-start-1 col-end-5","bg-black"].join(" "),stopNameGrid:["@container","col-start-1 col-end-5","bg-white","flex justify-center items-center"].join(" "),stopNameZh:["font-[500]","text-[8cqw]","max-sm:text-[8.5cqw]","max-md:text-[10cqw]","tracking-wider","whitespace-nowrap overflow-hidden"].join(" "),stopNameEn:["text-center","font-[500]","text-[5cqw]","max-sm:text-[4cqw]","max-md:text-[5cqw]"].join(" "),driverInfoGrid:["@container","flex justify-center","col-start-1 col-end-5","font-[400]","text-white","p-0.5"].join(" "),driverInfoText:["text-[2cqw]","max-md:text-[2.25cqw]"].join(" "),capitalize:"capitalize",noticeZhOverrideStyle:"!text-[8cqw]",noticeEnOverrideStyle:"!text-[3.75cqw]"},Kt=e=>{const s=J(e||"");return`clamp(2rem, ${Math.max(16-s*.45,6.5)}cqw, 10cqw)`},Ut=({monitorStyle:e,screenTarget:s})=>{var E,d,C,R,g;const{routeDetail:o,currentStopIndex:r,isLoading:i}=h(D=>D.routeSelection),{showHandrailNotice:n,showMindDoorNotice:u,stopPressed:c,driverInfo:a}=h(D=>D.userPreference),l=(d=(E=o==null?void 0:o.stops)==null?void 0:E[r])==null?void 0:d.zh,b=(R=(C=o==null?void 0:o.stops)==null?void 0:C[r])==null?void 0:R.en,v=p.useRef(null),F=p.useRef(null),_=p.useRef(null),x=p.useRef(null);ie(v,F,Gt,[o==null?void 0:o.route,o==null?void 0:o.bound,o==null?void 0:o.service_type]),ie(_,x,Zt,[o==null?void 0:o.route,o==null?void 0:o.bound,o==null?void 0:o.service_type]),p.useEffect(()=>{n||u?(_.current&&(_.current.style.display="none"),x.current&&(x.current.style.display="none")):(_.current&&(_.current.style.display="block"),x.current&&(x.current.style.display="none"))},[n,u]);const y={...P,parentGrid:`${P.parentGrid} ${e}`,nextStopIndicatorGrid:`${P.nextStopIndicatorGrid} ${c?"bg-[#FF0000] text-white":"bg-[#FFFF00] text-black"}`,driverInfoGrid:`${P.driverInfoGrid} ${c?"bg-[#FF0000]":"bg-black"}`};return t.jsxs("div",{ref:s,className:y.parentGrid,children:[t.jsxs("div",{className:y.nextStopIndicatorGrid,children:[t.jsxs("div",{className:y.nextStopIndicatorZh,children:["下一站",c&&"停於"]}),t.jsxs("div",{className:y.nextStopIndicatorEn,children:["Next ",c?"Stopping at":"Stop"]})]}),t.jsx("div",{className:y.routeHeadingGrid,children:t.jsx(Vt,{})}),t.jsx("div",{className:y.stopProgressBarGrid,children:i?t.jsx(po,{}):((g=o==null?void 0:o.stops)==null?void 0:g.length)>0&&t.jsxs("div",{className:y.stopProgressBarContainer,children:[t.jsx(eo,{progressBarRef:v}),t.jsx(Jt,{progressBarRef:F})]})}),t.jsx("div",{className:y.dividerGrid}),t.jsx("div",{className:y.stopNameGrid,children:n?t.jsx(qe,{zhNameOverrideStyle:y.noticeZhOverrideStyle,enNameOverrideStyle:y.noticeEnOverrideStyle}):u?t.jsx(ge,{zhNameOverrideStyle:y.noticeZhOverrideStyle,enNameOverrideStyle:y.noticeEnOverrideStyle}):t.jsxs(t.Fragment,{children:[t.jsx("span",{ref:_,className:y.stopNameZh,style:{fontSize:Kt(l)},children:l}),t.jsx("span",{ref:x,className:y.stopNameEn,children:b})]})}),t.jsxs("div",{className:y.driverInfoGrid,children:[t.jsxs("span",{className:y.driverInfoText,children:[a==null?void 0:a.nameZh,"車長正為您服務   Bus Captain "]}),t.jsxs("span",{className:`${y.driverInfoText} ${y.capitalize}`,children:[a==null?void 0:a.nameEn," "]}),t.jsxs("span",{className:y.driverInfoText,children:["is serving you   員工編號  Staff No.: ",a==null?void 0:a.staffNo]})]})]})},O={routeMarkerContainer:["flex flex-col","basis-[10%]","text-center","items-center"].join(" "),routeMarkerZh:["font-[500]","tracking-tighter","text-[4cqw]","max-sm:text-[4cqw]"].join(" "),routeMarkerEn:["tracking-tighter","text-[2.75cqw]","max-sm:text-[3cqw]"].join(" "),routeNumber:["basis-[17.5%]","font-[500]","text-[6.75cqw]","text-center","tracking-tight","scale-y-110"].join(" "),arrowContainer:["flex","basis-[10%]","max-xl:basis-[3.25rem]","max-sm:basis-[2rem]","justify-center"].join(" "),destContainer:["flex flex-col","mr-0.5"].join(" "),destZh:["font-[500]","whitespace-nowrap","text-[4.375cqw]","max-md:text-[4.375cqw]","max-sm:text-[5cqw]","tracking-wide","max-sm:tracking-normal"].join(" "),destEn:["font-[500]","text-sm","whitespace-nowrap","text-[2.5cqw]","max-sm:text-[2.625cqw]"].join(" ")},Vt=()=>{var o,r,i,n;const{routeDetail:e,lastStopIndex:s}=h(u=>u.routeSelection);return t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:O.routeMarkerContainer,children:[t.jsx("div",{className:O.routeMarkerZh,children:"路線"}),t.jsx("div",{className:O.routeMarkerEn,children:"Route"})]}),t.jsx("div",{className:O.routeNumber,children:e.route}),t.jsx("div",{className:O.arrowContainer,children:t.jsx(lo,{})}),t.jsxs("div",{className:O.destContainer,children:[t.jsx("div",{className:O.destZh,children:(r=(o=e==null?void 0:e.stops)==null?void 0:o[s])==null?void 0:r.zh}),t.jsx("div",{className:O.destEn,children:(n=(i=e==null?void 0:e.stops)==null?void 0:i[s])==null?void 0:n.en})]})]})},Yt=750,m={refContainer:"compact-progress-bar h-full",stopNameContainer:"stop-name-container @container w-full h-full relative",stopInfoRow:"stopInfoRow flex gap-1 w-full relative top-[33%] mb-[12cqw] items-center justify-center",stopInfoCol:"stopInfoCol flex flex-col gap-0.5 basis-[33%] min-w-[0] h-full justify-center",stopZh:"relative text-[2.5cqw] w-full text-center flex items-center justify-center",stopZhCurrent:"font-bold",stopEn:"relative text-[1.5cqw] w-full text-center flex items-center justify-center",stopEnCurrent:"font-black",stopEnOther:"text-black",progressBar:["progress-bar","line","flex justify-around","bg-[#FF0000]","w-[87.5%] h-[1.5cqw]","relative top-[-7cqw]","z-0"].join(" "),bullet:["bullet","bg-white","translate-x-[2cqw]","w-[1.5cqw] h-[1.5cqw]","max-sm:w-[1.75cqw] max-sm:h-[1.75cqw]","border-[1px] border-solid rounded-[50%]","relative","z-1","shrink-0"].join(" "),bulletPulse:["bulletPulse","outline outline-[0.15cqw] outline-white","border-[0.15cqw] border-[#FF0000]","!bg-[#FFFF00]","scale-125"].join(" "),bulletSecond:"bulletSecond translate-x-[7cqw]",bulletThird:"bulletThird translate-x-[11cqw]",arrowContainer:"absolute -translate-x-[37.5cqw]",arrowFirst:["absolute left-0","w-[1.5cqw] h-[1.5cqw]","border-t-[0.25vw] border-r-[0.25vw]","border-t-white border-r-white","rotate-45"].join(" "),arrowSecond:["absolute left-[1.75cqw]","w-[1.5cqw] h-[1.5cqw]","border-t-[0.25vw] border-r-[0.25vw]","border-t-white border-r-white","rotate-45"].join(" "),arrowThird:["absolute left-[3.5cqw]","w-[1.5cqw] h-[1.5cqw]","border-t-[0.25vw] border-r-[0.25vw]","border-t-white border-r-white","rotate-45"].join(" "),endIndicator:"h-[1.75cqw] border-1 border-solid border-red-600 rounded-[1px]",endIndicatorContainer:["absolute right-[-4%] top-1/2","-translate-y-1/2","flex gap-[1px]","z-10"].join(" ")},Jt=({progressBarRef:e})=>{const{routeDetail:s,currentStopIndex:o}=h(u=>u.routeSelection),[r,i]=p.useState(0),n=p.useRef(null);return p.useEffect(()=>(i(0),n.current&&clearInterval(n.current),n.current=setInterval(()=>{i(u=>u<3?u+1:0)},Yt),()=>clearInterval(n.current)),[o]),t.jsxs("div",{className:m.refContainer,ref:e,children:[t.jsx("div",{className:m.stopNameContainer,children:t.jsx("div",{className:m.stopInfoRow,children:[0,1,2].map(u=>{var a;const c=(a=s==null?void 0:s.stops)==null?void 0:a[o+u];return t.jsxs("div",{className:m.stopInfoCol,children:[t.jsx("div",{className:[m.stopZh,u===0&&m.stopZhCurrent].filter(Boolean).join(" "),children:c==null?void 0:c.zh}),t.jsx("div",{className:[m.stopEn,u===0?m.stopEnCurrent:m.stopEnOther].filter(Boolean).join(" "),children:c==null?void 0:c.en})]},u)})})}),t.jsxs("div",{className:m.progressBar,children:[t.jsxs("div",{className:m.arrowContainer,children:[r>=1&&t.jsx("div",{className:m.arrowFirst}),r>=2&&t.jsx("div",{className:m.arrowSecond}),r>=3&&t.jsx("div",{className:m.arrowThird})]}),[0,1,2].map(u=>t.jsx("div",{className:[m.bullet,u===0?m.bulletPulse:u===1?m.bulletSecond:m.bulletThird].filter(Boolean).join(" ")},u)),t.jsxs("div",{className:m.endIndicatorContainer,children:[t.jsx("div",{className:`${m.endIndicator} w-[0.25vw]`}),t.jsx("div",{className:`${m.endIndicator} w-[0.375vw]`}),t.jsx("div",{className:`${m.endIndicator} w-[0.5vw]`})]})]})]})},Xt=32,q={refContainer:"h-full",container:["line-container","@container flex","relative top-[87.5%]","w-[95%] h-[92%]","max-md:top-[89%]"].join(" "),startLineContainer:"flex gap-[2px] z-1",endLineContainer:["flex gap-[2px] justify-end","relative","w-full","max-md:gap-[0.5px]"].join(" "),progressBar:["@container line","flex flex-row justify-evenly","absolute left-1.5","w-[98%] h-[1.5cqw]","max-sm:w-[97%]","z-0"].join(" "),bullet:["bullet relative","bg-white border border-solid rounded-full","w-[1.5cqw] h-[1.5cqw]","z-1 shrink-0"].join(" "),bulletPulse:["animate-bullet-pulse","w-full h-full","rounded-[50%] bg-white"].join(" "),startLineBar:["bg-[gray]","w-[.2cqw] h-[2.5cqw]","max-md:w-[.375cqw] max-md:h-[3.5cqw]"].join(" "),endLineBar:["bg-[#FF0000]","w-[.2cqw] h-[2.5cqw]","max-md:w-[.375cqw] max-mx:h-[3.5cqw]"].join(" "),stopName:["stop-name absolute","text-black text-[1.75cqw]","top-[-2.75cqw] left-1/2","-translate-x-[5%] -rotate-[65deg]","origin-left whitespace-nowrap","max-md:text-[2cqw] max-md:top-[-3cqw]"].join(" "),stopNameCurrent:["font-black"].join(" "),stopNamePast:["!text-gray-300"].join(" "),splitEllipsis:["absolute text-xl","top-[-7cqw] right-[-3cqw]"].join(" ")},Qt=({stop:e,i:s,currentStopIndex:o})=>{const r=s===o,i=s<o;return t.jsxs("div",{className:q.bullet,style:{position:"relative"},children:[r&&t.jsx("div",{className:q.bulletPulse}),t.jsx("div",{className:[q.stopName,r&&q.stopNameCurrent,i&&q.stopNamePast].filter(Boolean).join(" "),children:e.zh})]})},eo=({progressBarRef:e})=>{var _,x;const{routeDetail:s,currentStopIndex:o,isUserSelectedRoute:r}=h(y=>y.routeSelection),i=((_=s==null?void 0:s.stops)==null?void 0:_.length)??0,n=Xt,u=Math.floor(n*.8),[c,a]=wt(i,o,n,u),l=a-c,b=o-c,v=l>1?b/(l+1)*100:0,F=i>n&&a<i;return t.jsx("div",{className:q.refContainer,ref:e,children:t.jsxs("div",{className:q.container,children:[r&&c===0&&t.jsx("div",{className:q.startLineContainer,children:[...Array(2)].map((y,E)=>t.jsx("div",{className:q.startLineBar},E))}),t.jsxs("div",{style:{background:`linear-gradient(to right, gray 0%, gray ${v}%, red ${v}%)`},className:q.progressBar,children:[(x=s==null?void 0:s.stops)==null?void 0:x.slice(c,a).map((y,E)=>t.jsx(Qt,{stop:y,i:c+E,currentStopIndex:o},c+E)),F&&t.jsx("div",{className:q.splitEllipsis,children:"..."})]}),r&&a===i&&t.jsx("div",{className:q.endLineContainer,children:[...Array(2)].map((y,E)=>t.jsx("div",{className:q.endLineBar},E))})]})})},M={parentGrid:["select-none","grid","grid-cols-[10fr_90fr]","grid-rows-[3.25fr_0.025fr_2fr_0.025fr_2fr]"].join(" "),arrowContainer:"@container text-center bg-[#FF0000]",arrowIcon:"mt-[0.5rem] justify-center",currentStopContainer:"flex flex-col bg-white"},to=({monitorStyle:e,screenTarget:s})=>{var a,l;const{routeDetail:o,currentStopIndex:r}=h(b=>b.routeSelection),{showMindDoorNotice:i,showHandrailNotice:n}=h(b=>b.userPreference),u=o==null?void 0:o.stops,c=[1,2].map(b=>{var v,F;return t.jsx(ro,{stopZh:(v=u==null?void 0:u[r+b])==null?void 0:v.zh,stopEn:(F=u==null?void 0:u[r+b])==null?void 0:F.en},b)});return t.jsxs("div",{ref:s,className:`${M.parentGrid} ${e}`,children:[i?t.jsx(ge,{}):t.jsxs(t.Fragment,{children:[t.jsx("div",{className:M.arrowContainer,children:t.jsx("div",{className:M.arrowIcon,children:t.jsx(oo,{})})}),t.jsx("div",{className:M.currentStopContainer,children:t.jsx(so,{stopZh:(a=u==null?void 0:u[r])==null?void 0:a.zh,stopEn:(l=u==null?void 0:u[r])==null?void 0:l.en})})]}),n?t.jsx(qe,{}):t.jsx(t.Fragment,{children:c})]})},oo=e=>t.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",shapeRendering:"geometricPrecision",textRendering:"geometricPrecision",viewBox:"0 0 160 300",...e,children:[t.jsxs("g",{fill:"#3f5787",stroke:"#fbfbfb",strokeWidth:3,children:[t.jsx("path",{d:"M-96 0H4",transform:"matrix(.64952 .375 -3.75 6.4952 82.563 45.202)"}),t.jsx("path",{d:"M-96 0H4",transform:"matrix(.64952 -.375 3.75 6.4952 136.34 10.702)"}),t.jsx("path",{d:"M-96 0H4",transform:"matrix(.64952 .375 -3.75 6.4952 82.563 91.702)"}),t.jsx("path",{d:"M-96 0H4",transform:"matrix(.64952 -.375 3.75 6.4952 136.34 57.202)"}),t.jsx("path",{d:"M-96 0H4",transform:"matrix(.64952 .375 -3.75 6.4952 82.563 138.202)"}),t.jsx("path",{d:"M-96 0H4",transform:"matrix(.64952 -.375 3.75 6.4952 136.34 103.702)"})]}),t.jsxs("g",{transform:"matrix(.75 0 0 .75 -16.586 -9.692)",children:[t.jsx("ellipse",{fill:"#fff",rx:66.997,ry:67.383,transform:"matrix(1.32296 0 0 1.29333 128.995 324.173)"}),t.jsx("ellipse",{fill:"#fffa00",stroke:"red",strokeWidth:10,rx:66.997,ry:67.383,transform:"matrix(.94385 0 0 .93055 128.995 322.985)"})]})]}),$={container:["@container","font-[500]","relative left-[1.25%]","w-[95%]","h-full","tracking-[-0.0625rem]"].join(" "),zhStopName:["h-[12cqw]","relative top-[2cqw]","flex items-center","tracking-normal"].join(" "),enStopNameWrapper:["relative top-[15%]","flex","h-[33%]","w-full","leading-tight"].join(" "),enStopName:["text-[5.125cqw]","max-md:text-[5.5cqw]","leading-[1.2]","w-full"].join(" ")},ce=(e="",s="en")=>{if(!e)return{};const o=J(e),i={en:{},zh:{min:7,base:20,scale:.66,fallback:7,max:12.5}}[s];if(!i)return{};const n={fontSize:`clamp(${i.min}cqw, ${Math.max(i.base-o*i.scale,i.fallback)}cqw, ${i.max}cqw)`};if(s==="zh")n.marginTop=`${o*.025}cqh`;else if(s==="en"){const u=o>38;n.alignSelf=u?"flex-start":"center",u&&(n.lineHeight="1.3",n.marginTop="-.5rem")}return n},so=({stopZh:e="",stopEn:s=""})=>t.jsxs("div",{className:$.container,children:[t.jsx("div",{className:$.zhStopName,style:ce(e,"zh"),children:e}),t.jsx("div",{className:$.enStopNameWrapper,children:t.jsx("span",{className:$.enStopName,style:ce(s,"en"),children:s})})]}),A={divider:["col-start-1","col-end-5","bg-[#f7f6f6c5]"].join(" "),stopIndicatorContainer:["@container","flex flex-col justify-center items-center","bg-[#FF0000]"].join(" "),stopIndicator:["inline-block","rounded-[50%]","bg-white","w-[65cqw] h-[65cqw]"].join(" "),stopNameContainer:["@container","relative","flex flex-col","bg-white","tracking-[-0.0375rem]"].join(" "),stopNameContent:["@container","font-[500]","relative left-[1.25%]","flex flex-col justify-center","h-[92.5%]","whitespace-nowrap"].join(" "),zhStopName:["relative","justify-center","max-md:top-[0.25cqw]","tracking-normal"].join(" "),enStopName:["justify-center","text-[3.75cqw]","max-sm:text-[3.75cqw]","sm:max-md:text-[3.75cqw]"].join(" ")},ue=(e,s,o)=>e?{zh:{fontSize:`clamp(6.8cqw, ${Math.max(18-J(e)*.5,6.75)}cqw, 8.25cqw)`},en:(()=>{const i=e.length;if(i<45)return{};const n=o<768?4:o<1280?3.75:3.5,u=i>=50?.8:.85;return{fontSize:`${n*u}cqw`}})()}[s]||{}:{},ro=({stopZh:e="",stopEn:s=""})=>{const{windowSize:o}=S();return t.jsxs(t.Fragment,{children:[t.jsx("div",{className:A.divider}),t.jsx("div",{className:A.stopIndicatorContainer,children:t.jsx("div",{className:A.stopIndicator})}),t.jsx("div",{className:A.stopNameContainer,children:t.jsxs("div",{className:A.stopNameContent,children:[t.jsx("div",{className:A.zhStopName,style:ue(e,"zh"),children:e}),t.jsx("span",{className:A.enStopName,style:ue(s,"en",o),children:s})]})})]})},qe=({containerOverrideStyle:e="",zhNameOverrideStyle:s="",enNameOverrideStyle:o=""})=>{const r={noticeContainer:"@container w-full h-full row-span-99 col-span-2 flex flex-col items-center justify-center bg-amber-300",textZh:"text-[12cqw] mt-[-1cqw] tracking-wider font-[700]",textEn:"text-[5.5cqw] mt-[-1.5cqw] tracking-tight font-[700]"};return t.jsxs("div",{className:r.noticeContainer+" "+e,children:[t.jsx("div",{className:r.textZh+" "+s,children:"請緊握扶手"}),t.jsx("div",{className:r.textEn+" "+o,children:"Please hold the handrail"})]})},ge=({containerOverrideStyle:e="",zhNameOverrideStyle:s="",enNameOverrideStyle:o=""})=>{const r={noticeContainer:"@container w-full h-full flex flex-col gap-1 col-span-3 justify-center items-center text-center bg-[#FF0000]",textZh:"text-[10cqw] mt-[-1cqw] text-white font-[600]",textEn:"text-[5cqw] mt-[-1.5cqw] text-white font-[600]"};return t.jsxs("div",{className:r.noticeContainer+" "+e,children:[t.jsx("div",{className:r.textZh+" "+s,children:"車門正在關上"}),t.jsx("div",{className:r.textEn+" "+o,children:"Door Closing"})]})},no=()=>t.jsx("div",{className:"fixed inset-0 -z-10 bg-gradient-to-br from-[#32302c] via-[#32323f] to-[#212525]",children:t.jsx("svg",{width:"100%",height:"100%",className:"absolute inset-0 pointer-events-none",style:{minHeight:"100vh"}})});B.string,B.string.isRequired,B.bool,B.func.isRequired;const io=({error:e})=>t.jsx("div",{className:"flex items-center justify-center p-4 w-full",children:t.jsxs("div",{className:"flex items-center gap-4 bg-red-50 border-l-12 border-red-500 p-4 rounded-r shadow-lg max-w-2xl",children:[t.jsx(Le,{className:"text-red-500 text-3xl"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-red-600",children:e||"An unexpected error occurred. Please try again."}),t.jsx("button",{onClick:()=>window.location.reload(),className:"mt-3 text-sm text-red-700 hover:cursor-pointer hover:text-red-900 underline",children:"Refresh Page"})]})]})}),co=le(be)(({theme:e})=>({width:"100%",padding:e.spacing(2)})),uo=le(z)(({theme:e})=>({fontSize:"0.75rem",color:"rgba(255,255,255, 0.5)",textAlign:"center",[e.breakpoints.down("sm")]:{fontSize:"0.75rem"}})),ao=()=>t.jsx(co,{component:"footer",children:t.jsx(We,{maxWidth:"xl",children:t.jsx("div",{className:"select-none max-md:hidden flex items-center justify-center",children:t.jsx(uo,{variant:"body2",component:"div",children:t.jsx("a",{target:"_blank",rel:"noreferrer",className:"text-gray-400/80 underline",href:"https://github.com/silverfankw/kmb-dpip",children:"silverfankw/kmb-dpip-v2 @ 2025"})})})})}),Oe=({message:e="",style:s={},tailwindStyle:o=""})=>t.jsx("span",{style:s,className:`text-xs ${o}`,children:e});Oe.propTypes={message:B.string.isRequired,style:B.object,tailwindStyle:B.string};const L=({id:e,type:s="text",pattern:o,validInput:r=!0,invalidMessage:i="",value:n="",style:u="",placeholder:c="",minLength:a,maxLength:l,onChange:b,onInput:v})=>t.jsxs("div",{children:[c&&t.jsx("label",{htmlFor:e,className:"text-xs text-gray-200",children:c}),t.jsx("input",{id:e,type:s,value:n,pattern:o,minLength:a,maxLength:l,className:`block bg-white text-black text-xs w-full 
                    rounded-lg border border-gray-500 py-3 pl-3 pr-10 
                    placeholder:text-gray-400 placeholder:text-xs
                    ${u}`,onChange:F=>b==null?void 0:b(F.target.value),onInput:v}),i&&!r&&n.length>0&&t.jsx(Oe,{message:i,tailwindStyle:"text-red-600"})]});L.propTypes={id:B.string,type:B.string,pattern:B.string,validInput:B.bool,invalidMessage:B.string,value:B.string,style:B.string,placeholder:B.string,minLength:B.number,maxLength:B.number,onChange:B.func,onInput:B.func,submitAction:B.func};const po=()=>t.jsx(be,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"},children:t.jsx(He,{color:"primary"})}),U=({sx:e,control:s,label:o})=>t.jsx(Ge,{sx:e,control:s,label:o}),lo=e=>t.jsx("svg",{width:"100%",height:"100%",style:{display:"block",maxWidth:"200px",height:"auto"},xmlns:"http://www.w3.org/2000/svg",shapeRendering:"geometricPrecision",textRendering:"geometricPrecision",viewBox:"0 0 200 130",...e,children:t.jsxs("g",{fill:"#fff",children:[t.jsxs("g",{transform:"translate(-714.021 -20.258)",children:[t.jsx("rect",{width:100.287,height:40.115,rx:0,ry:0,transform:"matrix(.48535 -.48535 .62202 0 727.59 131.579)"}),t.jsx("rect",{width:100.287,height:40.115,rx:0,ry:0,transform:"matrix(.49848 .49848 -.62202 0 751.225 32.957)"})]}),t.jsxs("g",{transform:"translate(-664.073 -19.578)",children:[t.jsx("rect",{width:100.287,height:40.115,rx:0,ry:0,transform:"matrix(.48535 -.48535 .62202 0 727.59 131.579)"}),t.jsx("rect",{width:100.287,height:40.115,rx:0,ry:0,transform:"matrix(.49848 .49848 -.62202 0 751.225 32.957)"})]}),t.jsxs("g",{transform:"translate(-613.467 -18.898)",children:[t.jsx("rect",{width:100.287,height:40.115,rx:0,ry:0,transform:"matrix(.48535 -.48535 .62202 0 727.59 131.579)"}),t.jsx("rect",{width:100.287,height:40.115,rx:0,ry:0,transform:"matrix(.49848 .49848 -.62202 0 751.225 32.957)"})]})]})}),f={rootContainer:"min-h-screen flex flex-col items-center",contentContainer:["select-none focus:outline-hidden","p-[2rem] max-sm:p-2","flex flex-1 flex-col gap-3 ","max-sm:gap-2"].join(" "),querySection:["order-1 max-sm:order-2","flex gap-3 items-center justify-center","bg-[#18181b]/80 backdrop-blur-md shadow-2xl ","p-6 max-md:p-4 max-md:flex-col max-md:gap-2","border border-gray-600/90 rounded-2xl"].join(" "),controlPanelSection:["order-2 max-sm:order-3","flex gap-4 flex-wrap justify-center","bg-[#18181b]/80 shadow-lg","p-6 w-full max-md:flex-col max-md:gap-4","border border-gray-600/90 rounded-2xl"].join(" "),screenPanelSection:["order-3 max-sm:order-1","flex flex-wrap items-center justify-center","gap-10 max-sm:gap-6 py-4"].join(" "),asyncSelectWrapper:"flex items-center gap-4 w-full",monitorStyle:["w-[800px] h-[480px]","max-xl:w-[700px] max-xl:h-[420px]","max-md:w-[600px] max-md:h-[360px]","max-sm:w-[400px] max-sm:h-[240px]","shadow-[0.5rem_0.5rem_1rem_0.25rem_#23272f]","border-[.375rem] max-md:border-[.25em] border-solid border-[#23272f]","rounded-xl","outline outline-[0.875rem] max-sm:outline-[0.625rem] outline-[#000000]","z-1"].join(" ")},bo=()=>{const e=de(),s=I(),{hasStoredData:o,storedData:r,saveToLocalStorage:i}=St(),{isUserSelectedRoute:n,loadingError:u,routeDetail:c,currentStopIndex:a}=h(_=>_.routeSelection),{routes:l}=h(_=>_.route);p.useEffect(()=>{s(dt())},[s]);const b=p.useCallback(async()=>{if(r&&l.length>0)try{s(Q({routeDetail:r,routes:l})),s(V(r.currentStopIndex||0))}catch(_){console.error("Error restoring selection:",_)}},[s,r,l]);p.useEffect(()=>{o&&l.length>0&&b()},[o,l,b]),p.useEffect(()=>{var _,x;if(n&&c&&Object.keys(c).length>0){const y={route:c.route,bound:c.bound,service_type:c.service_type,orig_tc:c.orig_tc,orig_en:c.orig_en,dest_tc:c.dest_tc,dest_en:c.dest_en,specialRemark:c.specialRemark,currentStop_tc:((_=c.stops[a])==null?void 0:_.zh)||"",currentStop_en:((x=c.stops[a])==null?void 0:x.en)||"",currentStopIndex:a,timestamp:Date.now()};i(y)}},[n,c,a,i]),p.useEffect(()=>{const _=()=>{var x,y;if(n&&c&&Object.keys(c).length>0){const E={route:c.route,bound:c.bound,service_type:c.service_type,orig_tc:c.orig_tc,orig_en:c.orig_en,dest_tc:c.dest_tc,dest_en:c.dest_en,specialRemark:c.specialRemark,currentStop_tc:((x=c.stops[a])==null?void 0:x.zh)||"",currentStop_en:((y=c.stops[a])==null?void 0:y.en)||"",currentStopIndex:a};i(E)}};return window.addEventListener("beforeunload",_),()=>window.removeEventListener("beforeunload",_)},[n,c,a,i]);const v=p.useRef(null),F=p.useRef(null);return At({onPrev:()=>s(Ce()),onNext:()=>s(he()),onHome:()=>s(V(0)),onEnd:()=>s(me()),isUserSelectedRoute:n,debounceMs:100,isDisabled:!1}),t.jsxs(t.Fragment,{children:[t.jsx(no,{}),t.jsxs("div",{className:f.rootContainer,children:[t.jsxs("div",{className:f.contentContainer,tabIndex:1,children:[t.jsx("section",{className:f.querySection,children:t.jsxs("div",{className:f.asyncSelectWrapper,children:[t.jsx(Ze,{sx:{color:"#999",fontSize:24,[e.breakpoints.down("sm")]:{display:"none"}}}),t.jsx("div",{className:"flex-1",children:t.jsx(Mt,{})})]})}),t.jsx("section",{className:f.controlPanelSection,children:t.jsx(Rt,{mainScreenTarget:v,secScreenTarget:F})}),t.jsx("section",{className:f.screenPanelSection,children:u?t.jsx(io,{error:u}):t.jsxs(t.Fragment,{children:[t.jsx(Ut,{monitorStyle:f.monitorStyle,screenTarget:v}),t.jsx(to,{monitorStyle:f.monitorStyle,screenTarget:F})]})})]}),t.jsx(ao,{})]})]})};fe.createRoot(document.getElementById("root")).render(t.jsx(De,{store:Ot,children:t.jsx(Re,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:t.jsx(Ke,{theme:ft,children:t.jsx(bo,{})})})}));
