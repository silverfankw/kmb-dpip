import{e as c}from"./get-east-asian-width-R4ibU9pT.js";import{e as f}from"./emoji-regex-D90yNSKR.js";function x({onlyFirst:t=!1}={}){const n=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?(?:\\u0007|\\u001B\\u005C|\\u009C))","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-nq-uy=><~]))"].join("|");return new RegExp(n,t?void 0:"g")}const a=x();function F(t){if(typeof t!="string")throw new TypeError(`Expected a \`string\`, got \`${typeof t}\``);return t.replace(a,"")}const _=new Intl.Segmenter,d=new RegExp("^\\p{Default_Ignorable_Code_Point}$","u");function A(t,s={}){if(typeof t!="string"||t.length===0)return 0;const{ambiguousIsNarrow:n=!0,countAnsiEscapeCodes:u=!1}=s;if(u||(t=F(t)),t.length===0)return 0;let o=0;const r={ambiguousAsWide:!n};for(const{segment:i}of _.segment(t)){const e=i.codePointAt(0);if(!(e<=31||e>=127&&e<=159)&&!(e>=8203&&e<=8207||e===65279)&&!(e>=768&&e<=879||e>=6832&&e<=6911||e>=7616&&e<=7679||e>=8400&&e<=8447||e>=65056&&e<=65071)&&!(e>=55296&&e<=57343)&&!(e>=65024&&e<=65039)&&!d.test(i)){if(f().test(i)){o+=2;continue}o+=c(e,r)}}return o}export{A as s};
